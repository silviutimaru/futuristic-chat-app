{"ast":null,"code":"var _jsxFileName = \"/Users/silviutimaru/futuristic-chat-app/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { io } from \"socket.io-client\";\n\n// Change these to your test user IDs\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst USER_ID = \"6866a789ed224bc42820cbc9\";\nconst OTHER_USER_ID = \"6866a8a0cca934b2567caac1\";\nconst GENERAL_ROOM_ID = \"6866ddcbef2398c4c05d9ed2\"; // <--- Your General Room ID\n\nconst API_BASE = \"http://localhost:3000\";\nconst SOCKET_SERVER_URL = \"http://localhost:3000\";\nconst SUPPORTED_LANGUAGES = [{\n  code: \"en\",\n  name: \"English\"\n}, {\n  code: \"fr\",\n  name: \"French\"\n}, {\n  code: \"de\",\n  name: \"German\"\n}, {\n  code: \"es\",\n  name: \"Spanish\"\n}, {\n  code: \"it\",\n  name: \"Italian\"\n}, {\n  code: \"ro\",\n  name: \"Romanian\"\n}, {\n  code: \"hu\",\n  name: \"Hungarian\"\n}, {\n  code: \"ru\",\n  name: \"Russian\"\n}, {\n  code: \"pl\",\n  name: \"Polish\"\n}, {\n  code: \"tr\",\n  name: \"Turkish\"\n}, {\n  code: \"uk\",\n  name: \"Ukrainian\"\n}, {\n  code: \"pt\",\n  name: \"Portuguese\"\n}, {\n  code: \"bg\",\n  name: \"Bulgarian\"\n}, {\n  code: \"cs\",\n  name: \"Czech\"\n}, {\n  code: \"el\",\n  name: \"Greek\"\n}, {\n  code: \"sv\",\n  name: \"Swedish\"\n}, {\n  code: \"fi\",\n  name: \"Finnish\"\n}, {\n  code: \"da\",\n  name: \"Danish\"\n}, {\n  code: \"nl\",\n  name: \"Dutch\"\n}, {\n  code: \"sk\",\n  name: \"Slovak\"\n}, {\n  code: \"hr\",\n  name: \"Croatian\"\n}, {\n  code: \"sr\",\n  name: \"Serbian\"\n}, {\n  code: \"sl\",\n  name: \"Slovenian\"\n}, {\n  code: \"no\",\n  name: \"Norwegian\"\n}];\nfunction getInitials(name) {\n  if (!name) return \"?\";\n  const parts = name.split(\" \");\n  return parts.map(p => p[0]).join(\"\").toUpperCase();\n}\nfunction formatTime(dateString) {\n  const d = new Date(dateString);\n  return d.toLocaleTimeString([], {\n    hour: \"2-digit\",\n    minute: \"2-digit\"\n  });\n}\nfunction App() {\n  _s();\n  const [friends, setFriends] = useState([]);\n  const [pendingInvitations, setPendingInvitations] = useState([]);\n  const [privateRooms, setPrivateRooms] = useState([]);\n  const [inviteId, setInviteId] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [roomMembers] = useState([USER_ID, OTHER_USER_ID]);\n  const [message, setMessage] = useState(\"\");\n  const [selectedRoom, setSelectedRoom] = useState(GENERAL_ROOM_ID); // Default to General Room\n  const [roomMessages, setRoomMessages] = useState([]);\n  const [senderName, setSenderName] = useState(\"\");\n  const [info, setInfo] = useState(\"\");\n  const [notification, setNotification] = useState(\"\");\n  const [userLanguage, setUserLanguage] = useState(\"en\");\n  const [callActive, setCallActive] = useState(false);\n  const [callIncoming, setCallIncoming] = useState(false);\n  const [remoteStream, setRemoteStream] = useState(null);\n  const [localStream, setLocalStream] = useState(null);\n  const [peerConnection, setPeerConnection] = useState(null);\n  const socketRef = useRef(null);\n  const localVideoRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n\n  // Fetch friends, invitations, and rooms on load\n  useEffect(() => {\n    fetchFriends();\n    fetchRooms();\n    getSenderName();\n    fetchUserLanguage();\n  }, []);\n\n  // Connect to Socket.IO\n  useEffect(() => {\n    const socket = io(SOCKET_SERVER_URL);\n    socketRef.current = socket;\n\n    // Listen for messages for any room\n    socket.on(\"room message\", ({\n      roomId,\n      message,\n      sender,\n      sentAt\n    }) => {\n      if (roomId === selectedRoom) {\n        setRoomMessages(prev => [...prev, {\n          message,\n          sender,\n          sentAt\n        }]);\n      } else {\n        setNotification(`New message in another room!`);\n      }\n    });\n\n    // Video call signaling\n    socket.on(\"video-offer\", handleVideoOffer);\n    socket.on(\"video-answer\", handleVideoAnswer);\n    socket.on(\"ice-candidate\", handleNewICECandidateMsg);\n    socket.on(\"call-ended\", handleCallEnded);\n    socket.on(\"call-incoming\", () => setCallIncoming(true));\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Join a room and fetch chat history when selectedRoom changes\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (selectedRoom) {\n        if (socketRef.current) {\n          socketRef.current.emit(\"join room\", selectedRoom);\n        }\n        try {\n          const res = await axios.get(`${API_BASE}/friends/room/messages/${selectedRoom}`);\n          setRoomMessages(res.data.messages.map(msg => ({\n            message: msg.message,\n            sender: msg.sender,\n            sentAt: msg.sentAt\n          })));\n          setInfo(`Joined room: ${getRoomName(selectedRoom)}`);\n        } catch {\n          setRoomMessages([]);\n          setInfo(\"Error fetching chat history\");\n        }\n      }\n    };\n    fetchHistory();\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Notification for new friend invitations\n  useEffect(() => {\n    if (pendingInvitations.length > 0) {\n      setNotification(\"You have a new friend request!\");\n    }\n  }, [pendingInvitations.length]);\n\n  // Attach video streams to video elements\n  useEffect(() => {\n    if (localVideoRef.current && localStream) {\n      localVideoRef.current.srcObject = localStream;\n    }\n    if (remoteVideoRef.current && remoteStream) {\n      remoteVideoRef.current.srcObject = remoteStream;\n    }\n  }, [localStream, remoteStream]);\n  const getSenderName = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      if (res.data && res.data.friends) {\n        const user = res.data.friends.find(f => f._id === USER_ID);\n        setSenderName(user ? `${user.firstName} ${user.lastName}` : \"You\");\n      }\n    } catch {\n      setSenderName(\"You\");\n    }\n  };\n  const fetchUserLanguage = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/users/${USER_ID}`);\n      if (res.data && res.data.language) {\n        setUserLanguage(res.data.language);\n      }\n    } catch {\n      setUserLanguage(\"en\");\n    }\n  };\n  const updateLanguage = async lang => {\n    setUserLanguage(lang);\n    try {\n      await axios.post(`${API_BASE}/users/update-language`, {\n        userId: USER_ID,\n        language: lang\n      });\n      setInfo(\"Language updated!\");\n    } catch {\n      setInfo(\"Error updating language\");\n    }\n  };\n  const getRoomName = roomId => {\n    if (roomId === GENERAL_ROOM_ID) return \"General Room\";\n    const room = privateRooms.find(r => r._id === roomId);\n    return room ? room.name : \"\";\n  };\n  const fetchFriends = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      setFriends(res.data.friends);\n      setPendingInvitations(res.data.pendingInvitations);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching friends\");\n    }\n  };\n  const fetchRooms = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/rooms/${USER_ID}`);\n      setPrivateRooms(res.data.privateRooms);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching rooms\");\n    }\n  };\n  const sendInvitation = async () => {\n    if (!inviteId) return;\n    try {\n      await axios.post(`${API_BASE}/friends/invite`, {\n        fromUserId: USER_ID,\n        toUserId: inviteId\n      });\n      setInfo(\"Invitation sent!\");\n      setInviteId(\"\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error sending invitation\");\n    }\n  };\n  const acceptInvitation = async fromUserId => {\n    try {\n      await axios.post(`${API_BASE}/friends/accept`, {\n        userId: USER_ID,\n        fromUserId\n      });\n      setInfo(\"Invitation accepted!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error accepting invitation\");\n    }\n  };\n  const removeFriend = async friendId => {\n    try {\n      await axios.post(`${API_BASE}/friends/remove`, {\n        userId: USER_ID,\n        friendId\n      });\n      setInfo(\"Friend removed!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error removing friend\");\n    }\n  };\n  const createRoom = async () => {\n    if (!roomName || roomMembers.length < 2) {\n      setInfo(\"Room name and at least 2 members required\");\n      return;\n    }\n    try {\n      await axios.post(`${API_BASE}/friends/room`, {\n        name: roomName,\n        memberIds: roomMembers\n      });\n      setInfo(\"Room created!\");\n      setRoomName(\"\");\n      fetchRooms();\n    } catch (err) {\n      setInfo(\"Error creating room\");\n    }\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (message.trim() && socketRef.current && selectedRoom) {\n      const sentAt = new Date().toISOString();\n      socketRef.current.emit(\"room message\", {\n        roomId: selectedRoom,\n        message,\n        sender: senderName || \"You\",\n        sentAt\n      });\n      try {\n        await axios.post(`${API_BASE}/friends/room/message`, {\n          roomId: selectedRoom,\n          message,\n          sender: senderName || \"You\",\n          sentAt\n        });\n      } catch {}\n      setRoomMessages(prev => [...prev, {\n        message,\n        sender: senderName || \"You\",\n        sentAt\n      }]);\n      setMessage(\"\");\n    }\n  };\n\n  // --- Video Call Logic ---\n\n  const startCall = async () => {\n    setCallActive(true);\n    const pc = createPeerConnection();\n    setPeerConnection(pc);\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      });\n      setLocalStream(stream);\n      stream.getTracks().forEach(track => pc.addTrack(track, stream));\n    } catch (err) {\n      alert(\"Could not access camera/microphone.\");\n      setCallActive(false);\n      return;\n    }\n    pc.onnegotiationneeded = async () => {\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer);\n      socketRef.current.emit(\"video-offer\", {\n        offer,\n        to: OTHER_USER_ID,\n        from: USER_ID\n      });\n    };\n  };\n  const handleVideoOffer = async ({\n    offer,\n    from\n  }) => {\n    setCallIncoming(true);\n    window.answerCall = async () => {\n      setCallActive(true);\n      setCallIncoming(false);\n      const pc = createPeerConnection();\n      setPeerConnection(pc);\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: true\n        });\n        setLocalStream(stream);\n        stream.getTracks().forEach(track => pc.addTrack(track, stream));\n      } catch (err) {\n        alert(\"Could not access camera/microphone.\");\n        setCallActive(false);\n        return;\n      }\n      await pc.setRemoteDescription(offer);\n      const answer = await pc.createAnswer();\n      await pc.setLocalDescription(answer);\n      socketRef.current.emit(\"video-answer\", {\n        answer,\n        to: from,\n        from: USER_ID\n      });\n    };\n  };\n  const handleVideoAnswer = async ({\n    answer\n  }) => {\n    if (peerConnection) {\n      await peerConnection.setRemoteDescription(answer);\n    }\n  };\n  const handleNewICECandidateMsg = async ({\n    candidate\n  }) => {\n    if (peerConnection && candidate) {\n      try {\n        await peerConnection.addIceCandidate(candidate);\n      } catch (e) {}\n    }\n  };\n  const handleCallEnded = () => {\n    setCallActive(false);\n    setCallIncoming(false);\n    setRemoteStream(null);\n    setLocalStream(null);\n    if (peerConnection) {\n      peerConnection.close();\n      setPeerConnection(null);\n    }\n  };\n  const createPeerConnection = () => {\n    const pc = new RTCPeerConnection();\n    pc.onicecandidate = event => {\n      if (event.candidate) {\n        socketRef.current.emit(\"ice-candidate\", {\n          candidate: event.candidate,\n          to: OTHER_USER_ID,\n          from: USER_ID\n        });\n      }\n    };\n    pc.ontrack = event => {\n      setRemoteStream(event.streams[0]);\n    };\n    return pc;\n  };\n  const endCall = () => {\n    socketRef.current.emit(\"call-ended\", {\n      to: OTHER_USER_ID,\n      from: USER_ID\n    });\n    handleCallEnded();\n  };\n  const clearNotification = () => setNotification(\"\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 700,\n      margin: \"40px auto\",\n      fontFamily: \"Arial, sans-serif\"\n    },\n    children: [notification && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"#fffae6\",\n        color: \"#856404\",\n        padding: \"10px 20px\",\n        borderRadius: 8,\n        marginBottom: 20,\n        border: \"1px solid #ffeeba\",\n        fontWeight: \"bold\",\n        cursor: \"pointer\"\n      },\n      onClick: clearNotification,\n      children: [notification, \" (click to dismiss)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Friends & Private Rooms\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 20\n      },\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Your Language: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: userLanguage,\n          onChange: e => updateLanguage(e.target.value),\n          style: {\n            marginLeft: 8,\n            padding: 4,\n            borderRadius: 4\n          },\n          children: SUPPORTED_LANGUAGES.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: lang.code,\n            children: lang.name\n          }, lang.code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this), info && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"green\",\n        marginBottom: 10\n      },\n      children: info\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Friends\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: friends.map(f => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: \"inline-block\",\n              width: 28,\n              height: 28,\n              borderRadius: \"50%\",\n              background: \"#007bff\",\n              color: \"#fff\",\n              textAlign: \"center\",\n              lineHeight: \"28px\",\n              marginRight: 8,\n              fontWeight: \"bold\"\n            },\n            children: getInitials(`${f.firstName} ${f.lastName}`)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 15\n          }, this), f.firstName, \" \", f.lastName, \" (\", f.email, \")\", /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginLeft: 10,\n              color: \"white\",\n              background: \"red\",\n              border: \"none\",\n              borderRadius: 4,\n              padding: \"2px 8px\",\n              cursor: \"pointer\"\n            },\n            onClick: () => removeFriend(f._id),\n            children: \"Remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this)]\n        }, f._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Pending Invitations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: pendingInvitations.map(inv => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: \"inline-block\",\n              width: 28,\n              height: 28,\n              borderRadius: \"50%\",\n              background: \"#6c757d\",\n              color: \"#fff\",\n              textAlign: \"center\",\n              lineHeight: \"28px\",\n              marginRight: 8,\n              fontWeight: \"bold\"\n            },\n            children: getInitials(`${inv.firstName} ${inv.lastName}`)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this), inv.firstName, \" \", inv.lastName, \" (\", inv.email, \")\", \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => acceptInvitation(inv._id),\n            children: \"Accept\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this)]\n        }, inv._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Send Friend Invitation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter user ID to invite\",\n        value: inviteId,\n        onChange: e => setInviteId(e.target.value),\n        style: {\n          marginRight: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendInvitation,\n        children: \"Send Invitation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Chat Rooms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"General Room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginLeft: 10\n            },\n            onClick: () => setSelectedRoom(GENERAL_ROOM_ID),\n            children: \"Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), privateRooms.map(room => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: room.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 15\n          }, this), \" (Members:\", \" \", room.members.map(m => `${m.firstName} ${m.lastName}`).join(\", \"), \")\", /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginLeft: 10\n            },\n            onClick: () => setSelectedRoom(room._id),\n            children: \"Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this)]\n        }, room._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Create Private Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Room name\",\n        value: roomName,\n        onChange: e => setRoomName(e.target.value),\n        style: {\n          marginRight: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: createRoom,\n        children: \"Create Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          color: \"#888\",\n          marginTop: 4\n        },\n        children: \"(Room will include you and the other test user)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 7\n    }, this), selectedRoom && /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginTop: 40\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Chat in: \", getRoomName(selectedRoom)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: \"1px solid #ccc\",\n          borderRadius: 8,\n          padding: 16,\n          minHeight: 200,\n          marginBottom: 16,\n          background: \"#f9f9f9\",\n          overflowY: \"auto\",\n          height: 300\n        },\n        children: roomMessages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"8px 0\",\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: \"inline-block\",\n              width: 28,\n              height: 28,\n              borderRadius: \"50%\",\n              background: \"#17a2b8\",\n              color: \"#fff\",\n              textAlign: \"center\",\n              lineHeight: \"28px\",\n              marginRight: 8,\n              fontWeight: \"bold\"\n            },\n            children: getInitials(msg.sender)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [msg.sender, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: 6\n            },\n            children: msg.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: \"auto\",\n              fontSize: 12,\n              color: \"#888\"\n            },\n            children: msg.sentAt ? formatTime(msg.sentAt) : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 17\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSendMessage,\n        style: {\n          display: \"flex\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          placeholder: \"Type your message...\",\n          style: {\n            flex: 1,\n            padding: 8,\n            borderRadius: 4,\n            border: \"1px solid #ccc\",\n            marginRight: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          style: {\n            padding: \"8px 16px\",\n            borderRadius: 4,\n            border: \"none\",\n            background: \"#007bff\",\n            color: \"#fff\",\n            cursor: \"pointer\"\n          },\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 20\n        },\n        children: [!callActive && !callIncoming && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startCall,\n          style: {\n            background: \"#28a745\",\n            color: \"#fff\",\n            padding: \"8px 16px\",\n            borderRadius: 4,\n            border: \"none\",\n            cursor: \"pointer\"\n          },\n          children: \"Start Video Call\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 15\n        }, this), callIncoming && !callActive && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Incoming call...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: window.answerCall,\n            style: {\n              marginLeft: 10,\n              background: \"#007bff\",\n              color: \"#fff\",\n              padding: \"8px 16px\",\n              borderRadius: 4,\n              border: \"none\",\n              cursor: \"pointer\"\n            },\n            children: \"Answer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCallEnded,\n            style: {\n              marginLeft: 10,\n              background: \"#dc3545\",\n              color: \"#fff\",\n              padding: \"8px 16px\",\n              borderRadius: 4,\n              border: \"none\",\n              cursor: \"pointer\"\n            },\n            children: \"Decline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 15\n        }, this), callActive && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 20\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: localVideoRef,\n              autoPlay: true,\n              muted: true,\n              style: {\n                width: 200,\n                borderRadius: 8,\n                marginRight: 10\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n              ref: remoteVideoRef,\n              autoPlay: true,\n              style: {\n                width: 200,\n                borderRadius: 8\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: endCall,\n            style: {\n              marginTop: 10,\n              background: \"#dc3545\",\n              color: \"#fff\",\n              padding: \"8px 16px\",\n              borderRadius: 4,\n              border: \"none\",\n              cursor: \"pointer\"\n            },\n            children: \"End Call\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 409,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"kItMMWAALboncMcjivNx4BnStqg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","io","jsxDEV","_jsxDEV","USER_ID","OTHER_USER_ID","GENERAL_ROOM_ID","API_BASE","SOCKET_SERVER_URL","SUPPORTED_LANGUAGES","code","name","getInitials","parts","split","map","p","join","toUpperCase","formatTime","dateString","d","Date","toLocaleTimeString","hour","minute","App","_s","friends","setFriends","pendingInvitations","setPendingInvitations","privateRooms","setPrivateRooms","inviteId","setInviteId","roomName","setRoomName","roomMembers","message","setMessage","selectedRoom","setSelectedRoom","roomMessages","setRoomMessages","senderName","setSenderName","info","setInfo","notification","setNotification","userLanguage","setUserLanguage","callActive","setCallActive","callIncoming","setCallIncoming","remoteStream","setRemoteStream","localStream","setLocalStream","peerConnection","setPeerConnection","socketRef","localVideoRef","remoteVideoRef","fetchFriends","fetchRooms","getSenderName","fetchUserLanguage","socket","current","on","roomId","sender","sentAt","prev","handleVideoOffer","handleVideoAnswer","handleNewICECandidateMsg","handleCallEnded","disconnect","fetchHistory","emit","res","get","data","messages","msg","getRoomName","length","srcObject","user","find","f","_id","firstName","lastName","language","updateLanguage","lang","post","userId","room","r","err","sendInvitation","fromUserId","toUserId","acceptInvitation","removeFriend","friendId","createRoom","memberIds","handleSendMessage","e","preventDefault","trim","toISOString","startCall","pc","createPeerConnection","stream","navigator","mediaDevices","getUserMedia","video","audio","getTracks","forEach","track","addTrack","alert","onnegotiationneeded","offer","createOffer","setLocalDescription","to","from","window","answerCall","setRemoteDescription","answer","createAnswer","candidate","addIceCandidate","close","RTCPeerConnection","onicecandidate","event","ontrack","streams","endCall","clearNotification","style","maxWidth","margin","fontFamily","children","background","color","padding","borderRadius","marginBottom","border","fontWeight","cursor","onClick","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","marginLeft","display","width","height","textAlign","lineHeight","marginRight","email","inv","type","placeholder","members","m","fontSize","marginTop","minHeight","overflowY","idx","alignItems","onSubmit","flex","ref","autoPlay","muted","_c","$RefreshReg$"],"sources":["/Users/silviutimaru/futuristic-chat-app/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { io } from \"socket.io-client\";\n\n// Change these to your test user IDs\nconst USER_ID = \"6866a789ed224bc42820cbc9\";\nconst OTHER_USER_ID = \"6866a8a0cca934b2567caac1\";\nconst GENERAL_ROOM_ID = \"6866ddcbef2398c4c05d9ed2\"; // <--- Your General Room ID\n\nconst API_BASE = \"http://localhost:3000\";\nconst SOCKET_SERVER_URL = \"http://localhost:3000\";\n\nconst SUPPORTED_LANGUAGES = [\n  { code: \"en\", name: \"English\" },\n  { code: \"fr\", name: \"French\" },\n  { code: \"de\", name: \"German\" },\n  { code: \"es\", name: \"Spanish\" },\n  { code: \"it\", name: \"Italian\" },\n  { code: \"ro\", name: \"Romanian\" },\n  { code: \"hu\", name: \"Hungarian\" },\n  { code: \"ru\", name: \"Russian\" },\n  { code: \"pl\", name: \"Polish\" },\n  { code: \"tr\", name: \"Turkish\" },\n  { code: \"uk\", name: \"Ukrainian\" },\n  { code: \"pt\", name: \"Portuguese\" },\n  { code: \"bg\", name: \"Bulgarian\" },\n  { code: \"cs\", name: \"Czech\" },\n  { code: \"el\", name: \"Greek\" },\n  { code: \"sv\", name: \"Swedish\" },\n  { code: \"fi\", name: \"Finnish\" },\n  { code: \"da\", name: \"Danish\" },\n  { code: \"nl\", name: \"Dutch\" },\n  { code: \"sk\", name: \"Slovak\" },\n  { code: \"hr\", name: \"Croatian\" },\n  { code: \"sr\", name: \"Serbian\" },\n  { code: \"sl\", name: \"Slovenian\" },\n  { code: \"no\", name: \"Norwegian\" }\n];\n\nfunction getInitials(name) {\n  if (!name) return \"?\";\n  const parts = name.split(\" \");\n  return parts.map((p) => p[0]).join(\"\").toUpperCase();\n}\n\nfunction formatTime(dateString) {\n  const d = new Date(dateString);\n  return d.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\n}\n\nfunction App() {\n  const [friends, setFriends] = useState([]);\n  const [pendingInvitations, setPendingInvitations] = useState([]);\n  const [privateRooms, setPrivateRooms] = useState([]);\n  const [inviteId, setInviteId] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [roomMembers] = useState([USER_ID, OTHER_USER_ID]);\n  const [message, setMessage] = useState(\"\");\n  const [selectedRoom, setSelectedRoom] = useState(GENERAL_ROOM_ID); // Default to General Room\n  const [roomMessages, setRoomMessages] = useState([]);\n  const [senderName, setSenderName] = useState(\"\");\n  const [info, setInfo] = useState(\"\");\n  const [notification, setNotification] = useState(\"\");\n  const [userLanguage, setUserLanguage] = useState(\"en\");\n  const [callActive, setCallActive] = useState(false);\n  const [callIncoming, setCallIncoming] = useState(false);\n  const [remoteStream, setRemoteStream] = useState(null);\n  const [localStream, setLocalStream] = useState(null);\n  const [peerConnection, setPeerConnection] = useState(null);\n\n  const socketRef = useRef(null);\n  const localVideoRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n\n  // Fetch friends, invitations, and rooms on load\n  useEffect(() => {\n    fetchFriends();\n    fetchRooms();\n    getSenderName();\n    fetchUserLanguage();\n  }, []);\n\n  // Connect to Socket.IO\n  useEffect(() => {\n    const socket = io(SOCKET_SERVER_URL);\n    socketRef.current = socket;\n\n    // Listen for messages for any room\n    socket.on(\"room message\", ({ roomId, message, sender, sentAt }) => {\n      if (roomId === selectedRoom) {\n        setRoomMessages((prev) => [...prev, { message, sender, sentAt }]);\n      } else {\n        setNotification(`New message in another room!`);\n      }\n    });\n\n    // Video call signaling\n    socket.on(\"video-offer\", handleVideoOffer);\n    socket.on(\"video-answer\", handleVideoAnswer);\n    socket.on(\"ice-candidate\", handleNewICECandidateMsg);\n    socket.on(\"call-ended\", handleCallEnded);\n    socket.on(\"call-incoming\", () => setCallIncoming(true));\n\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Join a room and fetch chat history when selectedRoom changes\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (selectedRoom) {\n        if (socketRef.current) {\n          socketRef.current.emit(\"join room\", selectedRoom);\n        }\n        try {\n          const res = await axios.get(`${API_BASE}/friends/room/messages/${selectedRoom}`);\n          setRoomMessages(\n            res.data.messages.map((msg) => ({\n              message: msg.message,\n              sender: msg.sender,\n              sentAt: msg.sentAt,\n            }))\n          );\n          setInfo(`Joined room: ${getRoomName(selectedRoom)}`);\n        } catch {\n          setRoomMessages([]);\n          setInfo(\"Error fetching chat history\");\n        }\n      }\n    };\n    fetchHistory();\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Notification for new friend invitations\n  useEffect(() => {\n    if (pendingInvitations.length > 0) {\n      setNotification(\"You have a new friend request!\");\n    }\n  }, [pendingInvitations.length]);\n\n  // Attach video streams to video elements\n  useEffect(() => {\n    if (localVideoRef.current && localStream) {\n      localVideoRef.current.srcObject = localStream;\n    }\n    if (remoteVideoRef.current && remoteStream) {\n      remoteVideoRef.current.srcObject = remoteStream;\n    }\n  }, [localStream, remoteStream]);\n\n  const getSenderName = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      if (res.data && res.data.friends) {\n        const user = res.data.friends.find((f) => f._id === USER_ID);\n        setSenderName(user ? `${user.firstName} ${user.lastName}` : \"You\");\n      }\n    } catch {\n      setSenderName(\"You\");\n    }\n  };\n\n  const fetchUserLanguage = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/users/${USER_ID}`);\n      if (res.data && res.data.language) {\n        setUserLanguage(res.data.language);\n      }\n    } catch {\n      setUserLanguage(\"en\");\n    }\n  };\n\n  const updateLanguage = async (lang) => {\n    setUserLanguage(lang);\n    try {\n      await axios.post(`${API_BASE}/users/update-language`, {\n        userId: USER_ID,\n        language: lang,\n      });\n      setInfo(\"Language updated!\");\n    } catch {\n      setInfo(\"Error updating language\");\n    }\n  };\n\n  const getRoomName = (roomId) => {\n    if (roomId === GENERAL_ROOM_ID) return \"General Room\";\n    const room = privateRooms.find((r) => r._id === roomId);\n    return room ? room.name : \"\";\n  };\n\n  const fetchFriends = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      setFriends(res.data.friends);\n      setPendingInvitations(res.data.pendingInvitations);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching friends\");\n    }\n  };\n\n  const fetchRooms = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/rooms/${USER_ID}`);\n      setPrivateRooms(res.data.privateRooms);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching rooms\");\n    }\n  };\n\n  const sendInvitation = async () => {\n    if (!inviteId) return;\n    try {\n      await axios.post(`${API_BASE}/friends/invite`, {\n        fromUserId: USER_ID,\n        toUserId: inviteId,\n      });\n      setInfo(\"Invitation sent!\");\n      setInviteId(\"\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error sending invitation\");\n    }\n  };\n\n  const acceptInvitation = async (fromUserId) => {\n    try {\n      await axios.post(`${API_BASE}/friends/accept`, {\n        userId: USER_ID,\n        fromUserId,\n      });\n      setInfo(\"Invitation accepted!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error accepting invitation\");\n    }\n  };\n\n  const removeFriend = async (friendId) => {\n    try {\n      await axios.post(`${API_BASE}/friends/remove`, {\n        userId: USER_ID,\n        friendId,\n      });\n      setInfo(\"Friend removed!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error removing friend\");\n    }\n  };\n\n  const createRoom = async () => {\n    if (!roomName || roomMembers.length < 2) {\n      setInfo(\"Room name and at least 2 members required\");\n      return;\n    }\n    try {\n      await axios.post(`${API_BASE}/friends/room`, {\n        name: roomName,\n        memberIds: roomMembers,\n      });\n      setInfo(\"Room created!\");\n      setRoomName(\"\");\n      fetchRooms();\n    } catch (err) {\n      setInfo(\"Error creating room\");\n    }\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (message.trim() && socketRef.current && selectedRoom) {\n      const sentAt = new Date().toISOString();\n      socketRef.current.emit(\"room message\", {\n        roomId: selectedRoom,\n        message,\n        sender: senderName || \"You\",\n        sentAt,\n      });\n      try {\n        await axios.post(`${API_BASE}/friends/room/message`, {\n          roomId: selectedRoom,\n          message,\n          sender: senderName || \"You\",\n          sentAt,\n        });\n      } catch {}\n      setRoomMessages((prev) => [\n        ...prev,\n        { message, sender: senderName || \"You\", sentAt },\n      ]);\n      setMessage(\"\");\n    }\n  };\n\n  // --- Video Call Logic ---\n\n  const startCall = async () => {\n    setCallActive(true);\n    const pc = createPeerConnection();\n    setPeerConnection(pc);\n\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n      setLocalStream(stream);\n      stream.getTracks().forEach((track) => pc.addTrack(track, stream));\n    } catch (err) {\n      alert(\"Could not access camera/microphone.\");\n      setCallActive(false);\n      return;\n    }\n\n    pc.onnegotiationneeded = async () => {\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer);\n      socketRef.current.emit(\"video-offer\", {\n        offer,\n        to: OTHER_USER_ID,\n        from: USER_ID,\n      });\n    };\n  };\n\n  const handleVideoOffer = async ({ offer, from }) => {\n    setCallIncoming(true);\n    window.answerCall = async () => {\n      setCallActive(true);\n      setCallIncoming(false);\n      const pc = createPeerConnection();\n      setPeerConnection(pc);\n\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n        setLocalStream(stream);\n        stream.getTracks().forEach((track) => pc.addTrack(track, stream));\n      } catch (err) {\n        alert(\"Could not access camera/microphone.\");\n        setCallActive(false);\n        return;\n      }\n\n      await pc.setRemoteDescription(offer);\n      const answer = await pc.createAnswer();\n      await pc.setLocalDescription(answer);\n      socketRef.current.emit(\"video-answer\", {\n        answer,\n        to: from,\n        from: USER_ID,\n      });\n    };\n  };\n\n  const handleVideoAnswer = async ({ answer }) => {\n    if (peerConnection) {\n      await peerConnection.setRemoteDescription(answer);\n    }\n  };\n\n  const handleNewICECandidateMsg = async ({ candidate }) => {\n    if (peerConnection && candidate) {\n      try {\n        await peerConnection.addIceCandidate(candidate);\n      } catch (e) {}\n    }\n  };\n\n  const handleCallEnded = () => {\n    setCallActive(false);\n    setCallIncoming(false);\n    setRemoteStream(null);\n    setLocalStream(null);\n    if (peerConnection) {\n      peerConnection.close();\n      setPeerConnection(null);\n    }\n  };\n\n  const createPeerConnection = () => {\n    const pc = new RTCPeerConnection();\n    pc.onicecandidate = (event) => {\n      if (event.candidate) {\n        socketRef.current.emit(\"ice-candidate\", {\n          candidate: event.candidate,\n          to: OTHER_USER_ID,\n          from: USER_ID,\n        });\n      }\n    };\n    pc.ontrack = (event) => {\n      setRemoteStream(event.streams[0]);\n    };\n    return pc;\n  };\n\n  const endCall = () => {\n    socketRef.current.emit(\"call-ended\", { to: OTHER_USER_ID, from: USER_ID });\n    handleCallEnded();\n  };\n\n  const clearNotification = () => setNotification(\"\");\n\n  return (\n    <div style={{ maxWidth: 700, margin: \"40px auto\", fontFamily: \"Arial, sans-serif\" }}>\n      {/* Notification Bar */}\n      {notification && (\n        <div\n          style={{\n            background: \"#fffae6\",\n            color: \"#856404\",\n            padding: \"10px 20px\",\n            borderRadius: 8,\n            marginBottom: 20,\n            border: \"1px solid #ffeeba\",\n            fontWeight: \"bold\",\n            cursor: \"pointer\",\n          }}\n          onClick={clearNotification}\n        >\n          {notification} (click to dismiss)\n        </div>\n      )}\n\n      <h2>Friends & Private Rooms</h2>\n\n      {/* Language Selector */}\n      <div style={{ marginBottom: 20 }}>\n        <label>\n          <b>Your Language: </b>\n          <select\n            value={userLanguage}\n            onChange={(e) => updateLanguage(e.target.value)}\n            style={{ marginLeft: 8, padding: 4, borderRadius: 4 }}\n          >\n            {SUPPORTED_LANGUAGES.map((lang) => (\n              <option key={lang.code} value={lang.code}>\n                {lang.name}\n              </option>\n            ))}\n          </select>\n        </label>\n      </div>\n\n      {info && <div style={{ color: \"green\", marginBottom: 10 }}>{info}</div>}\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Your Friends</h3>\n        <ul>\n          {friends.map((f) => (\n            <li key={f._id}>\n              <span\n                style={{\n                  display: \"inline-block\",\n                  width: 28,\n                  height: 28,\n                  borderRadius: \"50%\",\n                  background: \"#007bff\",\n                  color: \"#fff\",\n                  textAlign: \"center\",\n                  lineHeight: \"28px\",\n                  marginRight: 8,\n                  fontWeight: \"bold\",\n                }}\n              >\n                {getInitials(`${f.firstName} ${f.lastName}`)}\n              </span>\n              {f.firstName} {f.lastName} ({f.email})\n              <button\n                style={{\n                  marginLeft: 10,\n                  color: \"white\",\n                  background: \"red\",\n                  border: \"none\",\n                  borderRadius: 4,\n                  padding: \"2px 8px\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => removeFriend(f._id)}\n              >\n                Remove\n              </button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Pending Invitations</h3>\n        <ul>\n          {pendingInvitations.map((inv) => (\n            <li key={inv._id}>\n              <span\n                style={{\n                  display: \"inline-block\",\n                  width: 28,\n                  height: 28,\n                  borderRadius: \"50%\",\n                  background: \"#6c757d\",\n                  color: \"#fff\",\n                  textAlign: \"center\",\n                  lineHeight: \"28px\",\n                  marginRight: 8,\n                  fontWeight: \"bold\",\n                }}\n              >\n                {getInitials(`${inv.firstName} ${inv.lastName}`)}\n              </span>\n              {inv.firstName} {inv.lastName} ({inv.email}){\" \"}\n              <button onClick={() => acceptInvitation(inv._id)}>Accept</button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Send Friend Invitation</h3>\n        <input\n          type=\"text\"\n          placeholder=\"Enter user ID to invite\"\n          value={inviteId}\n          onChange={(e) => setInviteId(e.target.value)}\n          style={{ marginRight: 8 }}\n        />\n        <button onClick={sendInvitation}>Send Invitation</button>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Chat Rooms</h3>\n        <ul>\n          <li>\n            <b>General Room</b>\n            <button\n              style={{ marginLeft: 10 }}\n              onClick={() => setSelectedRoom(GENERAL_ROOM_ID)}\n            >\n              Chat\n            </button>\n          </li>\n          {privateRooms.map((room) => (\n            <li key={room._id}>\n              <b>{room.name}</b> (Members:{\" \"}\n              {room.members.map((m) => `${m.firstName} ${m.lastName}`).join(\", \")})\n              <button\n                style={{ marginLeft: 10 }}\n                onClick={() => setSelectedRoom(room._id)}\n              >\n                Chat\n              </button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section>\n        <h3>Create Private Room</h3>\n        <input\n          type=\"text\"\n          placeholder=\"Room name\"\n          value={roomName}\n          onChange={(e) => setRoomName(e.target.value)}\n          style={{ marginRight: 8 }}\n        />\n        <button onClick={createRoom}>Create Room</button>\n        <div style={{ fontSize: 12, color: \"#888\", marginTop: 4 }}>\n          (Room will include you and the other test user)\n        </div>\n      </section>\n\n      {selectedRoom && (\n        <section style={{ marginTop: 40 }}>\n          <h3>Chat in: {getRoomName(selectedRoom)}</h3>\n          <div\n            style={{\n              border: \"1px solid #ccc\",\n              borderRadius: 8,\n              padding: 16,\n              minHeight: 200,\n              marginBottom: 16,\n              background: \"#f9f9f9\",\n              overflowY: \"auto\",\n              height: 300,\n            }}\n          >\n            {roomMessages.map((msg, idx) => (\n              <div key={idx} style={{ margin: \"8px 0\", display: \"flex\", alignItems: \"center\" }}>\n                <span\n                  style={{\n                    display: \"inline-block\",\n                    width: 28,\n                    height: 28,\n                    borderRadius: \"50%\",\n                    background: \"#17a2b8\",\n                    color: \"#fff\",\n                    textAlign: \"center\",\n                    lineHeight: \"28px\",\n                    marginRight: 8,\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {getInitials(msg.sender)}\n                </span>\n                <b>{msg.sender}:</b>\n                <span style={{ marginLeft: 6 }}>{msg.message}</span>\n                <span style={{ marginLeft: \"auto\", fontSize: 12, color: \"#888\" }}>\n                  {msg.sentAt ? formatTime(msg.sentAt) : \"\"}\n                </span>\n              </div>\n            ))}\n          </div>\n          <form onSubmit={handleSendMessage} style={{ display: \"flex\" }}>\n            <input\n              type=\"text\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder=\"Type your message...\"\n              style={{\n                flex: 1,\n                padding: 8,\n                borderRadius: 4,\n                border: \"1px solid #ccc\",\n                marginRight: 8,\n              }}\n            />\n            <button\n              type=\"submit\"\n              style={{\n                padding: \"8px 16px\",\n                borderRadius: 4,\n                border: \"none\",\n                background: \"#007bff\",\n                color: \"#fff\",\n                cursor: \"pointer\",\n              }}\n            >\n              Send\n            </button>\n          </form>\n          {/* Video Call UI */}\n          <div style={{ marginTop: 20 }}>\n            {!callActive && !callIncoming && (\n              <button onClick={startCall} style={{ background: \"#28a745\", color: \"#fff\", padding: \"8px 16px\", borderRadius: 4, border: \"none\", cursor: \"pointer\" }}>\n                Start Video Call\n              </button>\n            )}\n            {callIncoming && !callActive && (\n              <div>\n                <b>Incoming call...</b>\n                <button onClick={window.answerCall} style={{ marginLeft: 10, background: \"#007bff\", color: \"#fff\", padding: \"8px 16px\", borderRadius: 4, border: \"none\", cursor: \"pointer\" }}>\n                  Answer\n                </button>\n                <button onClick={handleCallEnded} style={{ marginLeft: 10, background: \"#dc3545\", color: \"#fff\", padding: \"8px 16px\", borderRadius: 4, border: \"none\", cursor: \"pointer\" }}>\n                  Decline\n                </button>\n              </div>\n            )}\n            {callActive && (\n              <div style={{ marginTop: 20 }}>\n                <div>\n                  <video ref={localVideoRef} autoPlay muted style={{ width: 200, borderRadius: 8, marginRight: 10 }} />\n                  <video ref={remoteVideoRef} autoPlay style={{ width: 200, borderRadius: 8 }} />\n                </div>\n                <button onClick={endCall} style={{ marginTop: 10, background: \"#dc3545\", color: \"#fff\", padding: \"8px 16px\", borderRadius: 4, border: \"none\", cursor: \"pointer\" }}>\n                  End Call\n                </button>\n              </div>\n            )}\n          </div>\n        </section>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
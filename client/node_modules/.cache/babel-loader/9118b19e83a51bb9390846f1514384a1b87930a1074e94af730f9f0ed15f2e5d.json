{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import axios from\"axios\";import{io}from\"socket.io-client\";// Change these to your test user IDs\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const USER_ID=\"6866a789ed224bc42820cbc9\";const OTHER_USER_ID=\"6866a8a0cca934b2567caac1\";const GENERAL_ROOM_ID=\"6866ddcbef2398c4c05d9ed2\";// <--- Your General Room ID\nconst API_BASE=\"https://futuristic-chat-app-production.up.railway.app\";const SOCKET_SERVER_URL=\"https://futuristic-chat-app-production.up.railway.app\";const SUPPORTED_LANGUAGES=[{code:\"en\",name:\"English\"},{code:\"fr\",name:\"French\"},{code:\"de\",name:\"German\"},{code:\"es\",name:\"Spanish\"},{code:\"it\",name:\"Italian\"},{code:\"ro\",name:\"Romanian\"},{code:\"hu\",name:\"Hungarian\"},{code:\"ru\",name:\"Russian\"},{code:\"pl\",name:\"Polish\"},{code:\"tr\",name:\"Turkish\"},{code:\"uk\",name:\"Ukrainian\"},{code:\"pt\",name:\"Portuguese\"},{code:\"bg\",name:\"Bulgarian\"},{code:\"cs\",name:\"Czech\"},{code:\"el\",name:\"Greek\"},{code:\"sv\",name:\"Swedish\"},{code:\"fi\",name:\"Finnish\"},{code:\"da\",name:\"Danish\"},{code:\"nl\",name:\"Dutch\"},{code:\"sk\",name:\"Slovak\"},{code:\"hr\",name:\"Croatian\"},{code:\"sr\",name:\"Serbian\"},{code:\"sl\",name:\"Slovenian\"},{code:\"no\",name:\"Norwegian\"}];function getInitials(name){if(!name)return\"?\";const parts=name.split(\" \");return parts.map(p=>p[0]).join(\"\").toUpperCase();}function formatTime(dateString){const d=new Date(dateString);return d.toLocaleTimeString([],{hour:\"2-digit\",minute:\"2-digit\"});}function App(){const[friends,setFriends]=useState([]);const[pendingInvitations,setPendingInvitations]=useState([]);const[privateRooms,setPrivateRooms]=useState([]);const[inviteId,setInviteId]=useState(\"\");const[roomName,setRoomName]=useState(\"\");const[roomMembers]=useState([USER_ID,OTHER_USER_ID]);const[message,setMessage]=useState(\"\");const[selectedRoom,setSelectedRoom]=useState(GENERAL_ROOM_ID);// Default to General Room\nconst[roomMessages,setRoomMessages]=useState([]);const[senderName,setSenderName]=useState(\"\");const[info,setInfo]=useState(\"\");const[notification,setNotification]=useState(\"\");const[userLanguage,setUserLanguage]=useState(\"en\");const[callActive,setCallActive]=useState(false);const[callIncoming,setCallIncoming]=useState(false);const[remoteStream,setRemoteStream]=useState(null);const[localStream,setLocalStream]=useState(null);const[peerConnection,setPeerConnection]=useState(null);const socketRef=useRef(null);const localVideoRef=useRef(null);const remoteVideoRef=useRef(null);// Fetch friends, invitations, and rooms on load\nuseEffect(()=>{fetchFriends();fetchRooms();getSenderName();fetchUserLanguage();},[]);// Connect to Socket.IO\nuseEffect(()=>{const socket=io(SOCKET_SERVER_URL);socketRef.current=socket;// Listen for messages for any room\nsocket.on(\"room message\",_ref=>{let{roomId,message,sender,sentAt}=_ref;if(roomId===selectedRoom){setRoomMessages(prev=>[...prev,{message,sender,sentAt}]);}else{setNotification(\"New message in another room!\");}});// Video call signaling\nsocket.on(\"video-offer\",handleVideoOffer);socket.on(\"video-answer\",handleVideoAnswer);socket.on(\"ice-candidate\",handleNewICECandidateMsg);socket.on(\"call-ended\",handleCallEnded);socket.on(\"call-incoming\",()=>setCallIncoming(true));return()=>{socket.disconnect();};// eslint-disable-next-line\n},[selectedRoom]);// Join a room and fetch chat history when selectedRoom changes\nuseEffect(()=>{const fetchHistory=async()=>{if(selectedRoom){if(socketRef.current){socketRef.current.emit(\"join room\",selectedRoom);}try{const res=await axios.get(\"\".concat(API_BASE,\"/friends/room/messages/\").concat(selectedRoom));setRoomMessages(res.data.messages.map(msg=>({message:msg.message,sender:msg.sender,sentAt:msg.sentAt})));setInfo(\"Joined room: \".concat(getRoomName(selectedRoom)));}catch(_unused){setRoomMessages([]);setInfo(\"Error fetching chat history\");}}};fetchHistory();// eslint-disable-next-line\n},[selectedRoom]);// Notification for new friend invitations\nuseEffect(()=>{if(pendingInvitations.length>0){setNotification(\"You have a new friend request!\");}},[pendingInvitations.length]);// Attach video streams to video elements\nuseEffect(()=>{if(localVideoRef.current&&localStream){localVideoRef.current.srcObject=localStream;}if(remoteVideoRef.current&&remoteStream){remoteVideoRef.current.srcObject=remoteStream;}},[localStream,remoteStream]);const getSenderName=async()=>{try{const res=await axios.get(\"\".concat(API_BASE,\"/friends/list/\").concat(USER_ID));if(res.data&&res.data.friends){const user=res.data.friends.find(f=>f._id===USER_ID);setSenderName(user?\"\".concat(user.firstName,\" \").concat(user.lastName):\"You\");}}catch(_unused2){setSenderName(\"You\");}};const fetchUserLanguage=async()=>{try{const res=await axios.get(\"\".concat(API_BASE,\"/users/\").concat(USER_ID));if(res.data&&res.data.language){setUserLanguage(res.data.language);}}catch(_unused3){setUserLanguage(\"en\");}};const updateLanguage=async lang=>{setUserLanguage(lang);try{await axios.post(\"\".concat(API_BASE,\"/users/update-language\"),{userId:USER_ID,language:lang});setInfo(\"Language updated!\");}catch(_unused4){setInfo(\"Error updating language\");}};const getRoomName=roomId=>{if(roomId===GENERAL_ROOM_ID)return\"General Room\";const room=privateRooms.find(r=>r._id===roomId);return room?room.name:\"\";};const fetchFriends=async()=>{try{const res=await axios.get(\"\".concat(API_BASE,\"/friends/list/\").concat(USER_ID));setFriends(res.data.friends);setPendingInvitations(res.data.pendingInvitations);setInfo(\"\");}catch(err){setInfo(\"Error fetching friends\");}};const fetchRooms=async()=>{try{const res=await axios.get(\"\".concat(API_BASE,\"/friends/rooms/\").concat(USER_ID));setPrivateRooms(res.data.privateRooms);setInfo(\"\");}catch(err){setInfo(\"Error fetching rooms\");}};const sendInvitation=async()=>{if(!inviteId)return;try{await axios.post(\"\".concat(API_BASE,\"/friends/invite\"),{fromUserId:USER_ID,toUserId:inviteId});setInfo(\"Invitation sent!\");setInviteId(\"\");fetchFriends();}catch(err){setInfo(\"Error sending invitation\");}};const acceptInvitation=async fromUserId=>{try{await axios.post(\"\".concat(API_BASE,\"/friends/accept\"),{userId:USER_ID,fromUserId});setInfo(\"Invitation accepted!\");fetchFriends();}catch(err){setInfo(\"Error accepting invitation\");}};const removeFriend=async friendId=>{try{await axios.post(\"\".concat(API_BASE,\"/friends/remove\"),{userId:USER_ID,friendId});setInfo(\"Friend removed!\");fetchFriends();}catch(err){setInfo(\"Error removing friend\");}};const createRoom=async()=>{if(!roomName||roomMembers.length<2){setInfo(\"Room name and at least 2 members required\");return;}try{await axios.post(\"\".concat(API_BASE,\"/friends/room\"),{name:roomName,memberIds:roomMembers});setInfo(\"Room created!\");setRoomName(\"\");fetchRooms();}catch(err){setInfo(\"Error creating room\");}};const handleSendMessage=async e=>{e.preventDefault();if(message.trim()&&socketRef.current&&selectedRoom){const sentAt=new Date().toISOString();socketRef.current.emit(\"room message\",{roomId:selectedRoom,message,sender:senderName||\"You\",sentAt});try{await axios.post(\"\".concat(API_BASE,\"/friends/room/message\"),{roomId:selectedRoom,message,sender:senderName||\"You\",sentAt});}catch(_unused5){}setRoomMessages(prev=>[...prev,{message,sender:senderName||\"You\",sentAt}]);setMessage(\"\");}};// --- Video Call Logic ---\nconst startCall=async()=>{setCallActive(true);const pc=createPeerConnection();setPeerConnection(pc);try{const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});setLocalStream(stream);stream.getTracks().forEach(track=>pc.addTrack(track,stream));}catch(err){alert(\"Could not access camera/microphone.\");setCallActive(false);return;}pc.onnegotiationneeded=async()=>{const offer=await pc.createOffer();await pc.setLocalDescription(offer);socketRef.current.emit(\"video-offer\",{offer,to:OTHER_USER_ID,from:USER_ID});};};const handleVideoOffer=async _ref2=>{let{offer,from}=_ref2;setCallIncoming(true);window.answerCall=async()=>{setCallActive(true);setCallIncoming(false);const pc=createPeerConnection();setPeerConnection(pc);try{const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});setLocalStream(stream);stream.getTracks().forEach(track=>pc.addTrack(track,stream));}catch(err){alert(\"Could not access camera/microphone.\");setCallActive(false);return;}await pc.setRemoteDescription(offer);const answer=await pc.createAnswer();await pc.setLocalDescription(answer);socketRef.current.emit(\"video-answer\",{answer,to:from,from:USER_ID});};};const handleVideoAnswer=async _ref3=>{let{answer}=_ref3;if(peerConnection){await peerConnection.setRemoteDescription(answer);}};const handleNewICECandidateMsg=async _ref4=>{let{candidate}=_ref4;if(peerConnection&&candidate){try{await peerConnection.addIceCandidate(candidate);}catch(e){}}};const handleCallEnded=()=>{setCallActive(false);setCallIncoming(false);setRemoteStream(null);setLocalStream(null);if(peerConnection){peerConnection.close();setPeerConnection(null);}};const createPeerConnection=()=>{const pc=new RTCPeerConnection();pc.onicecandidate=event=>{if(event.candidate){socketRef.current.emit(\"ice-candidate\",{candidate:event.candidate,to:OTHER_USER_ID,from:USER_ID});}};pc.ontrack=event=>{setRemoteStream(event.streams[0]);};return pc;};const endCall=()=>{socketRef.current.emit(\"call-ended\",{to:OTHER_USER_ID,from:USER_ID});handleCallEnded();};const clearNotification=()=>setNotification(\"\");return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:700,margin:\"40px auto\",fontFamily:\"Arial, sans-serif\"},children:[notification&&/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#fffae6\",color:\"#856404\",padding:\"10px 20px\",borderRadius:8,marginBottom:20,border:\"1px solid #ffeeba\",fontWeight:\"bold\",cursor:\"pointer\"},onClick:clearNotification,children:[notification,\" (click to dismiss)\"]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Friends & Private Rooms\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:20},children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Your Language: \"}),/*#__PURE__*/_jsx(\"select\",{value:userLanguage,onChange:e=>updateLanguage(e.target.value),style:{marginLeft:8,padding:4,borderRadius:4},children:SUPPORTED_LANGUAGES.map(lang=>/*#__PURE__*/_jsx(\"option\",{value:lang.code,children:lang.name},lang.code))})]})}),info&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"green\",marginBottom:10},children:info}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:30},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Friends\"}),/*#__PURE__*/_jsx(\"ul\",{children:friends.map(f=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{display:\"inline-block\",width:28,height:28,borderRadius:\"50%\",background:\"#007bff\",color:\"#fff\",textAlign:\"center\",lineHeight:\"28px\",marginRight:8,fontWeight:\"bold\"},children:getInitials(\"\".concat(f.firstName,\" \").concat(f.lastName))}),f.firstName,\" \",f.lastName,\" (\",f.email,\")\",/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:10,color:\"white\",background:\"red\",border:\"none\",borderRadius:4,padding:\"2px 8px\",cursor:\"pointer\"},onClick:()=>removeFriend(f._id),children:\"Remove\"})]},f._id))})]}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:30},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pending Invitations\"}),/*#__PURE__*/_jsx(\"ul\",{children:pendingInvitations.map(inv=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{display:\"inline-block\",width:28,height:28,borderRadius:\"50%\",background:\"#6c757d\",color:\"#fff\",textAlign:\"center\",lineHeight:\"28px\",marginRight:8,fontWeight:\"bold\"},children:getInitials(\"\".concat(inv.firstName,\" \").concat(inv.lastName))}),inv.firstName,\" \",inv.lastName,\" (\",inv.email,\")\",\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>acceptInvitation(inv._id),children:\"Accept\"})]},inv._id))})]}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:30},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Send Friend Invitation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter user ID to invite\",value:inviteId,onChange:e=>setInviteId(e.target.value),style:{marginRight:8}}),/*#__PURE__*/_jsx(\"button\",{onClick:sendInvitation,children:\"Send Invitation\"})]}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:30},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Chat Rooms\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"General Room\"}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:10},onClick:()=>setSelectedRoom(GENERAL_ROOM_ID),children:\"Chat\"})]}),privateRooms.map(room=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:room.name}),\" (Members:\",\" \",room.members.map(m=>\"\".concat(m.firstName,\" \").concat(m.lastName)).join(\", \"),\")\",/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:10},onClick:()=>setSelectedRoom(room._id),children:\"Chat\"})]},room._id))]})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create Private Room\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Room name\",value:roomName,onChange:e=>setRoomName(e.target.value),style:{marginRight:8}}),/*#__PURE__*/_jsx(\"button\",{onClick:createRoom,children:\"Create Room\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:\"#888\",marginTop:4},children:\"(Room will include you and the other test user)\"})]}),selectedRoom&&/*#__PURE__*/_jsxs(\"section\",{style:{marginTop:40},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Chat in: \",getRoomName(selectedRoom)]}),/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px solid #ccc\",borderRadius:8,padding:16,minHeight:200,marginBottom:16,background:\"#f9f9f9\",overflowY:\"auto\",height:300},children:roomMessages.map((msg,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"8px 0\",display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{display:\"inline-block\",width:28,height:28,borderRadius:\"50%\",background:\"#17a2b8\",color:\"#fff\",textAlign:\"center\",lineHeight:\"28px\",marginRight:8,fontWeight:\"bold\"},children:getInitials(msg.sender)}),/*#__PURE__*/_jsxs(\"b\",{children:[msg.sender,\":\"]}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:6},children:msg.message}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:\"auto\",fontSize:12,color:\"#888\"},children:msg.sentAt?formatTime(msg.sentAt):\"\"})]},idx))}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"Type your message...\",style:{flex:1,padding:8,borderRadius:4,border:\"1px solid #ccc\",marginRight:8}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:\"8px 16px\",borderRadius:4,border:\"none\",background:\"#007bff\",color:\"#fff\",cursor:\"pointer\"},children:\"Send\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20},children:[!callActive&&!callIncoming&&/*#__PURE__*/_jsx(\"button\",{onClick:startCall,style:{background:\"#28a745\",color:\"#fff\",padding:\"8px 16px\",borderRadius:4,border:\"none\",cursor:\"pointer\"},children:\"Start Video Call\"}),callIncoming&&!callActive&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Incoming call...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:window.answerCall,style:{marginLeft:10,background:\"#007bff\",color:\"#fff\",padding:\"8px 16px\",borderRadius:4,border:\"none\",cursor:\"pointer\"},children:\"Answer\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCallEnded,style:{marginLeft:10,background:\"#dc3545\",color:\"#fff\",padding:\"8px 16px\",borderRadius:4,border:\"none\",cursor:\"pointer\"},children:\"Decline\"})]}),callActive&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"video\",{ref:localVideoRef,autoPlay:true,muted:true,style:{width:200,borderRadius:8,marginRight:10}}),/*#__PURE__*/_jsx(\"video\",{ref:remoteVideoRef,autoPlay:true,style:{width:200,borderRadius:8}})]}),/*#__PURE__*/_jsx(\"button\",{onClick:endCall,style:{marginTop:10,background:\"#dc3545\",color:\"#fff\",padding:\"8px 16px\",borderRadius:4,border:\"none\",cursor:\"pointer\"},children:\"End Call\"})]})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","io","jsxs","_jsxs","jsx","_jsx","USER_ID","OTHER_USER_ID","GENERAL_ROOM_ID","API_BASE","SOCKET_SERVER_URL","SUPPORTED_LANGUAGES","code","name","getInitials","parts","split","map","p","join","toUpperCase","formatTime","dateString","d","Date","toLocaleTimeString","hour","minute","App","friends","setFriends","pendingInvitations","setPendingInvitations","privateRooms","setPrivateRooms","inviteId","setInviteId","roomName","setRoomName","roomMembers","message","setMessage","selectedRoom","setSelectedRoom","roomMessages","setRoomMessages","senderName","setSenderName","info","setInfo","notification","setNotification","userLanguage","setUserLanguage","callActive","setCallActive","callIncoming","setCallIncoming","remoteStream","setRemoteStream","localStream","setLocalStream","peerConnection","setPeerConnection","socketRef","localVideoRef","remoteVideoRef","fetchFriends","fetchRooms","getSenderName","fetchUserLanguage","socket","current","on","_ref","roomId","sender","sentAt","prev","handleVideoOffer","handleVideoAnswer","handleNewICECandidateMsg","handleCallEnded","disconnect","fetchHistory","emit","res","get","concat","data","messages","msg","getRoomName","_unused","length","srcObject","user","find","f","_id","firstName","lastName","_unused2","language","_unused3","updateLanguage","lang","post","userId","_unused4","room","r","err","sendInvitation","fromUserId","toUserId","acceptInvitation","removeFriend","friendId","createRoom","memberIds","handleSendMessage","e","preventDefault","trim","toISOString","_unused5","startCall","pc","createPeerConnection","stream","navigator","mediaDevices","getUserMedia","video","audio","getTracks","forEach","track","addTrack","alert","onnegotiationneeded","offer","createOffer","setLocalDescription","to","from","_ref2","window","answerCall","setRemoteDescription","answer","createAnswer","_ref3","_ref4","candidate","addIceCandidate","close","RTCPeerConnection","onicecandidate","event","ontrack","streams","endCall","clearNotification","style","maxWidth","margin","fontFamily","children","background","color","padding","borderRadius","marginBottom","border","fontWeight","cursor","onClick","value","onChange","target","marginLeft","display","width","height","textAlign","lineHeight","marginRight","email","inv","type","placeholder","members","m","fontSize","marginTop","minHeight","overflowY","idx","alignItems","onSubmit","flex","ref","autoPlay","muted"],"sources":["/Users/silviutimaru/futuristic-chat-app/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { io } from \"socket.io-client\";\n\n// Change these to your test user IDs\nconst USER_ID = \"6866a789ed224bc42820cbc9\";\nconst OTHER_USER_ID = \"6866a8a0cca934b2567caac1\";\nconst GENERAL_ROOM_ID = \"6866ddcbef2398c4c05d9ed2\"; // <--- Your General Room ID\n\nconst API_BASE = \"https://futuristic-chat-app-production.up.railway.app\";\nconst SOCKET_SERVER_URL = \"https://futuristic-chat-app-production.up.railway.app\";\n\nconst SUPPORTED_LANGUAGES = [\n  { code: \"en\", name: \"English\" },\n  { code: \"fr\", name: \"French\" },\n  { code: \"de\", name: \"German\" },\n  { code: \"es\", name: \"Spanish\" },\n  { code: \"it\", name: \"Italian\" },\n  { code: \"ro\", name: \"Romanian\" },\n  { code: \"hu\", name: \"Hungarian\" },\n  { code: \"ru\", name: \"Russian\" },\n  { code: \"pl\", name: \"Polish\" },\n  { code: \"tr\", name: \"Turkish\" },\n  { code: \"uk\", name: \"Ukrainian\" },\n  { code: \"pt\", name: \"Portuguese\" },\n  { code: \"bg\", name: \"Bulgarian\" },\n  { code: \"cs\", name: \"Czech\" },\n  { code: \"el\", name: \"Greek\" },\n  { code: \"sv\", name: \"Swedish\" },\n  { code: \"fi\", name: \"Finnish\" },\n  { code: \"da\", name: \"Danish\" },\n  { code: \"nl\", name: \"Dutch\" },\n  { code: \"sk\", name: \"Slovak\" },\n  { code: \"hr\", name: \"Croatian\" },\n  { code: \"sr\", name: \"Serbian\" },\n  { code: \"sl\", name: \"Slovenian\" },\n  { code: \"no\", name: \"Norwegian\" }\n];\n\nfunction getInitials(name) {\n  if (!name) return \"?\";\n  const parts = name.split(\" \");\n  return parts.map((p) => p[0]).join(\"\").toUpperCase();\n}\n\nfunction formatTime(dateString) {\n  const d = new Date(dateString);\n  return d.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\n}\n\nfunction App() {\n  const [friends, setFriends] = useState([]);\n  const [pendingInvitations, setPendingInvitations] = useState([]);\n  const [privateRooms, setPrivateRooms] = useState([]);\n  const [inviteId, setInviteId] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [roomMembers] = useState([USER_ID, OTHER_USER_ID]);\n  const [message, setMessage] = useState(\"\");\n  const [selectedRoom, setSelectedRoom] = useState(GENERAL_ROOM_ID); // Default to General Room\n  const [roomMessages, setRoomMessages] = useState([]);\n  const [senderName, setSenderName] = useState(\"\");\n  const [info, setInfo] = useState(\"\");\n  const [notification, setNotification] = useState(\"\");\n  const [userLanguage, setUserLanguage] = useState(\"en\");\n  const [callActive, setCallActive] = useState(false);\n  const [callIncoming, setCallIncoming] = useState(false);\n  const [remoteStream, setRemoteStream] = useState(null);\n  const [localStream, setLocalStream] = useState(null);\n  const [peerConnection, setPeerConnection] = useState(null);\n\n  const socketRef = useRef(null);\n  const localVideoRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n\n  // Fetch friends, invitations, and rooms on load\n  useEffect(() => {\n    fetchFriends();\n    fetchRooms();\n    getSenderName();\n    fetchUserLanguage();\n  }, []);\n\n  // Connect to Socket.IO\n  useEffect(() => {\n    const socket = io(SOCKET_SERVER_URL);\n    socketRef.current = socket;\n\n    // Listen for messages for any room\n    socket.on(\"room message\", ({ roomId, message, sender, sentAt }) => {\n      if (roomId === selectedRoom) {\n        setRoomMessages((prev) => [...prev, { message, sender, sentAt }]);\n      } else {\n        setNotification(`New message in another room!`);\n      }\n    });\n\n    // Video call signaling\n    socket.on(\"video-offer\", handleVideoOffer);\n    socket.on(\"video-answer\", handleVideoAnswer);\n    socket.on(\"ice-candidate\", handleNewICECandidateMsg);\n    socket.on(\"call-ended\", handleCallEnded);\n    socket.on(\"call-incoming\", () => setCallIncoming(true));\n\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Join a room and fetch chat history when selectedRoom changes\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (selectedRoom) {\n        if (socketRef.current) {\n          socketRef.current.emit(\"join room\", selectedRoom);\n        }\n        try {\n          const res = await axios.get(`${API_BASE}/friends/room/messages/${selectedRoom}`);\n          setRoomMessages(\n            res.data.messages.map((msg) => ({\n              message: msg.message,\n              sender: msg.sender,\n              sentAt: msg.sentAt,\n            }))\n          );\n          setInfo(`Joined room: ${getRoomName(selectedRoom)}`);\n        } catch {\n          setRoomMessages([]);\n          setInfo(\"Error fetching chat history\");\n        }\n      }\n    };\n    fetchHistory();\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Notification for new friend invitations\n  useEffect(() => {\n    if (pendingInvitations.length > 0) {\n      setNotification(\"You have a new friend request!\");\n    }\n  }, [pendingInvitations.length]);\n\n  // Attach video streams to video elements\n  useEffect(() => {\n    if (localVideoRef.current && localStream) {\n      localVideoRef.current.srcObject = localStream;\n    }\n    if (remoteVideoRef.current && remoteStream) {\n      remoteVideoRef.current.srcObject = remoteStream;\n    }\n  }, [localStream, remoteStream]);\n\n  const getSenderName = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      if (res.data && res.data.friends) {\n        const user = res.data.friends.find((f) => f._id === USER_ID);\n        setSenderName(user ? `${user.firstName} ${user.lastName}` : \"You\");\n      }\n    } catch {\n      setSenderName(\"You\");\n    }\n  };\n\n  const fetchUserLanguage = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/users/${USER_ID}`);\n      if (res.data && res.data.language) {\n        setUserLanguage(res.data.language);\n      }\n    } catch {\n      setUserLanguage(\"en\");\n    }\n  };\n\n  const updateLanguage = async (lang) => {\n    setUserLanguage(lang);\n    try {\n      await axios.post(`${API_BASE}/users/update-language`, {\n        userId: USER_ID,\n        language: lang,\n      });\n      setInfo(\"Language updated!\");\n    } catch {\n      setInfo(\"Error updating language\");\n    }\n  };\n\n  const getRoomName = (roomId) => {\n    if (roomId === GENERAL_ROOM_ID) return \"General Room\";\n    const room = privateRooms.find((r) => r._id === roomId);\n    return room ? room.name : \"\";\n  };\n\n  const fetchFriends = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      setFriends(res.data.friends);\n      setPendingInvitations(res.data.pendingInvitations);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching friends\");\n    }\n  };\n\n  const fetchRooms = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/rooms/${USER_ID}`);\n      setPrivateRooms(res.data.privateRooms);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching rooms\");\n    }\n  };\n\n  const sendInvitation = async () => {\n    if (!inviteId) return;\n    try {\n      await axios.post(`${API_BASE}/friends/invite`, {\n        fromUserId: USER_ID,\n        toUserId: inviteId,\n      });\n      setInfo(\"Invitation sent!\");\n      setInviteId(\"\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error sending invitation\");\n    }\n  };\n\n  const acceptInvitation = async (fromUserId) => {\n    try {\n      await axios.post(`${API_BASE}/friends/accept`, {\n        userId: USER_ID,\n        fromUserId,\n      });\n      setInfo(\"Invitation accepted!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error accepting invitation\");\n    }\n  };\n\n  const removeFriend = async (friendId) => {\n    try {\n      await axios.post(`${API_BASE}/friends/remove`, {\n        userId: USER_ID,\n        friendId,\n      });\n      setInfo(\"Friend removed!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error removing friend\");\n    }\n  };\n\n  const createRoom = async () => {\n    if (!roomName || roomMembers.length < 2) {\n      setInfo(\"Room name and at least 2 members required\");\n      return;\n    }\n    try {\n      await axios.post(`${API_BASE}/friends/room`, {\n        name: roomName,\n        memberIds: roomMembers,\n      });\n      setInfo(\"Room created!\");\n      setRoomName(\"\");\n      fetchRooms();\n    } catch (err) {\n      setInfo(\"Error creating room\");\n    }\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (message.trim() && socketRef.current && selectedRoom) {\n      const sentAt = new Date().toISOString();\n      socketRef.current.emit(\"room message\", {\n        roomId: selectedRoom,\n        message,\n        sender: senderName || \"You\",\n        sentAt,\n      });\n      try {\n        await axios.post(`${API_BASE}/friends/room/message`, {\n          roomId: selectedRoom,\n          message,\n          sender: senderName || \"You\",\n          sentAt,\n        });\n      } catch {}\n      setRoomMessages((prev) => [\n        ...prev,\n        { message, sender: senderName || \"You\", sentAt },\n      ]);\n      setMessage(\"\");\n    }\n  };\n\n  // --- Video Call Logic ---\n\n  const startCall = async () => {\n    setCallActive(true);\n    const pc = createPeerConnection();\n    setPeerConnection(pc);\n\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n      setLocalStream(stream);\n      stream.getTracks().forEach((track) => pc.addTrack(track, stream));\n    } catch (err) {\n      alert(\"Could not access camera/microphone.\");\n      setCallActive(false);\n      return;\n    }\n\n    pc.onnegotiationneeded = async () => {\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer);\n      socketRef.current.emit(\"video-offer\", {\n        offer,\n        to: OTHER_USER_ID,\n        from: USER_ID,\n      });\n    };\n  };\n\n  const handleVideoOffer = async ({ offer, from }) => {\n    setCallIncoming(true);\n    window.answerCall = async () => {\n      setCallActive(true);\n      setCallIncoming(false);\n      const pc = createPeerConnection();\n      setPeerConnection(pc);\n\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n        setLocalStream(stream);\n        stream.getTracks().forEach((track) => pc.addTrack(track, stream));\n      } catch (err) {\n        alert(\"Could not access camera/microphone.\");\n        setCallActive(false);\n        return;\n      }\n\n      await pc.setRemoteDescription(offer);\n      const answer = await pc.createAnswer();\n      await pc.setLocalDescription(answer);\n      socketRef.current.emit(\"video-answer\", {\n        answer,\n        to: from,\n        from: USER_ID,\n      });\n    };\n  };\n\n  const handleVideoAnswer = async ({ answer }) => {\n    if (peerConnection) {\n      await peerConnection.setRemoteDescription(answer);\n    }\n  };\n\n  const handleNewICECandidateMsg = async ({ candidate }) => {\n    if (peerConnection && candidate) {\n      try {\n        await peerConnection.addIceCandidate(candidate);\n      } catch (e) {}\n    }\n  };\n\n  const handleCallEnded = () => {\n    setCallActive(false);\n    setCallIncoming(false);\n    setRemoteStream(null);\n    setLocalStream(null);\n    if (peerConnection) {\n      peerConnection.close();\n      setPeerConnection(null);\n    }\n  };\n\n  const createPeerConnection = () => {\n    const pc = new RTCPeerConnection();\n    pc.onicecandidate = (event) => {\n      if (event.candidate) {\n        socketRef.current.emit(\"ice-candidate\", {\n          candidate: event.candidate,\n          to: OTHER_USER_ID,\n          from: USER_ID,\n        });\n      }\n    };\n    pc.ontrack = (event) => {\n      setRemoteStream(event.streams[0]);\n    };\n    return pc;\n  };\n\n  const endCall = () => {\n    socketRef.current.emit(\"call-ended\", { to: OTHER_USER_ID, from: USER_ID });\n    handleCallEnded();\n  };\n\n  const clearNotification = () => setNotification(\"\");\n\n  return (\n    <div style={{ maxWidth: 700, margin: \"40px auto\", fontFamily: \"Arial, sans-serif\" }}>\n      {/* Notification Bar */}\n      {notification && (\n        <div\n          style={{\n            background: \"#fffae6\",\n            color: \"#856404\",\n            padding: \"10px 20px\",\n            borderRadius: 8,\n            marginBottom: 20,\n            border: \"1px solid #ffeeba\",\n            fontWeight: \"bold\",\n            cursor: \"pointer\",\n          }}\n          onClick={clearNotification}\n        >\n          {notification} (click to dismiss)\n        </div>\n      )}\n\n      <h2>Friends & Private Rooms</h2>\n\n      {/* Language Selector */}\n      <div style={{ marginBottom: 20 }}>\n        <label>\n          <b>Your Language: </b>\n          <select\n            value={userLanguage}\n            onChange={(e) => updateLanguage(e.target.value)}\n            style={{ marginLeft: 8, padding: 4, borderRadius: 4 }}\n          >\n            {SUPPORTED_LANGUAGES.map((lang) => (\n              <option key={lang.code} value={lang.code}>\n                {lang.name}\n              </option>\n            ))}\n          </select>\n        </label>\n      </div>\n\n      {info && <div style={{ color: \"green\", marginBottom: 10 }}>{info}</div>}\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Your Friends</h3>\n        <ul>\n          {friends.map((f) => (\n            <li key={f._id}>\n              <span\n                style={{\n                  display: \"inline-block\",\n                  width: 28,\n                  height: 28,\n                  borderRadius: \"50%\",\n                  background: \"#007bff\",\n                  color: \"#fff\",\n                  textAlign: \"center\",\n                  lineHeight: \"28px\",\n                  marginRight: 8,\n                  fontWeight: \"bold\",\n                }}\n              >\n                {getInitials(`${f.firstName} ${f.lastName}`)}\n              </span>\n              {f.firstName} {f.lastName} ({f.email})\n              <button\n                style={{\n                  marginLeft: 10,\n                  color: \"white\",\n                  background: \"red\",\n                  border: \"none\",\n                  borderRadius: 4,\n                  padding: \"2px 8px\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => removeFriend(f._id)}\n              >\n                Remove\n              </button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Pending Invitations</h3>\n        <ul>\n          {pendingInvitations.map((inv) => (\n            <li key={inv._id}>\n              <span\n                style={{\n                  display: \"inline-block\",\n                  width: 28,\n                  height: 28,\n                  borderRadius: \"50%\",\n                  background: \"#6c757d\",\n                  color: \"#fff\",\n                  textAlign: \"center\",\n                  lineHeight: \"28px\",\n                  marginRight: 8,\n                  fontWeight: \"bold\",\n                }}\n              >\n                {getInitials(`${inv.firstName} ${inv.lastName}`)}\n              </span>\n              {inv.firstName} {inv.lastName} ({inv.email}){\" \"}\n              <button onClick={() => acceptInvitation(inv._id)}>Accept</button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Send Friend Invitation</h3>\n        <input\n          type=\"text\"\n          placeholder=\"Enter user ID to invite\"\n          value={inviteId}\n          onChange={(e) => setInviteId(e.target.value)}\n          style={{ marginRight: 8 }}\n        />\n        <button onClick={sendInvitation}>Send Invitation</button>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Chat Rooms</h3>\n        <ul>\n          <li>\n            <b>General Room</b>\n            <button\n              style={{ marginLeft: 10 }}\n              onClick={() => setSelectedRoom(GENERAL_ROOM_ID)}\n            >\n              Chat\n            </button>\n          </li>\n          {privateRooms.map((room) => (\n            <li key={room._id}>\n              <b>{room.name}</b> (Members:{\" \"}\n              {room.members.map((m) => `${m.firstName} ${m.lastName}`).join(\", \")})\n              <button\n                style={{ marginLeft: 10 }}\n                onClick={() => setSelectedRoom(room._id)}\n              >\n                Chat\n              </button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section>\n        <h3>Create Private Room</h3>\n        <input\n          type=\"text\"\n          placeholder=\"Room name\"\n          value={roomName}\n          onChange={(e) => setRoomName(e.target.value)}\n          style={{ marginRight: 8 }}\n        />\n        <button onClick={createRoom}>Create Room</button>\n        <div style={{ fontSize: 12, color: \"#888\", marginTop: 4 }}>\n          (Room will include you and the other test user)\n        </div>\n      </section>\n\n      {selectedRoom && (\n        <section style={{ marginTop: 40 }}>\n          <h3>Chat in: {getRoomName(selectedRoom)}</h3>\n          <div\n            style={{\n              border: \"1px solid #ccc\",\n              borderRadius: 8,\n              padding: 16,\n              minHeight: 200,\n              marginBottom: 16,\n              background: \"#f9f9f9\",\n              overflowY: \"auto\",\n              height: 300,\n            }}\n          >\n            {roomMessages.map((msg, idx) => (\n              <div key={idx} style={{ margin: \"8px 0\", display: \"flex\", alignItems: \"center\" }}>\n                <span\n                  style={{\n                    display: \"inline-block\",\n                    width: 28,\n                    height: 28,\n                    borderRadius: \"50%\",\n                    background: \"#17a2b8\",\n                    color: \"#fff\",\n                    textAlign: \"center\",\n                    lineHeight: \"28px\",\n                    marginRight: 8,\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {getInitials(msg.sender)}\n                </span>\n                <b>{msg.sender}:</b>\n                <span style={{ marginLeft: 6 }}>{msg.message}</span>\n                <span style={{ marginLeft: \"auto\", fontSize: 12, color: \"#888\" }}>\n                  {msg.sentAt ? formatTime(msg.sentAt) : \"\"}\n                </span>\n              </div>\n            ))}\n          </div>\n          <form onSubmit={handleSendMessage} style={{ display: \"flex\" }}>\n            <input\n              type=\"text\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder=\"Type your message...\"\n              style={{\n                flex: 1,\n                padding: 8,\n                borderRadius: 4,\n                border: \"1px solid #ccc\",\n                marginRight: 8,\n              }}\n            />\n            <button\n              type=\"submit\"\n              style={{\n                padding: \"8px 16px\",\n                borderRadius: 4,\n                border: \"none\",\n                background: \"#007bff\",\n                color: \"#fff\",\n                cursor: \"pointer\",\n              }}\n            >\n              Send\n            </button>\n          </form>\n          {/* Video Call UI */}\n          <div style={{ marginTop: 20 }}>\n            {!callActive && !callIncoming && (\n              <button onClick={startCall} style={{ background: \"#28a745\", color: \"#fff\", padding: \"8px 16px\", borderRadius: 4, border: \"none\", cursor: \"pointer\" }}>\n                Start Video Call\n              </button>\n            )}\n            {callIncoming && !callActive && (\n              <div>\n                <b>Incoming call...</b>\n                <button onClick={window.answerCall} style={{ marginLeft: 10, background: \"#007bff\", color: \"#fff\", padding: \"8px 16px\", borderRadius: 4, border: \"none\", cursor: \"pointer\" }}>\n                  Answer\n                </button>\n                <button onClick={handleCallEnded} style={{ marginLeft: 10, background: \"#dc3545\", color: \"#fff\", padding: \"8px 16px\", borderRadius: 4, border: \"none\", cursor: \"pointer\" }}>\n                  Decline\n                </button>\n              </div>\n            )}\n            {callActive && (\n              <div style={{ marginTop: 20 }}>\n                <div>\n                  <video ref={localVideoRef} autoPlay muted style={{ width: 200, borderRadius: 8, marginRight: 10 }} />\n                  <video ref={remoteVideoRef} autoPlay style={{ width: 200, borderRadius: 8 }} />\n                </div>\n                <button onClick={endCall} style={{ marginTop: 10, background: \"#dc3545\", color: \"#fff\", padding: \"8px 16px\", borderRadius: 4, border: \"none\", cursor: \"pointer\" }}>\n                  End Call\n                </button>\n              </div>\n            )}\n          </div>\n        </section>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
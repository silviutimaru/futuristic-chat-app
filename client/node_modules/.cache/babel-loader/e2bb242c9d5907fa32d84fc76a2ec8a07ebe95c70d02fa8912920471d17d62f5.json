{"ast":null,"code":"var _jsxFileName = \"/Users/silviutimaru/futuristic-chat-app/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { io } from \"socket.io-client\";\n\n// Change these to your test user IDs\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst USER_ID = \"6866a789ed224bc42820cbc9\";\nconst OTHER_USER_ID = \"6866a8a0cca934b2567caac1\";\nconst API_BASE = \"http://localhost:3000\";\nconst SOCKET_SERVER_URL = \"http://localhost:3000\";\nfunction getInitials(name) {\n  if (!name) return \"?\";\n  const parts = name.split(\" \");\n  return parts.map(p => p[0]).join(\"\").toUpperCase();\n}\nfunction formatTime(dateString) {\n  const d = new Date(dateString);\n  return d.toLocaleTimeString([], {\n    hour: \"2-digit\",\n    minute: \"2-digit\"\n  });\n}\nfunction App() {\n  _s();\n  const [friends, setFriends] = useState([]);\n  const [pendingInvitations, setPendingInvitations] = useState([]);\n  const [privateRooms, setPrivateRooms] = useState([]);\n  const [inviteId, setInviteId] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [roomMembers] = useState([USER_ID, OTHER_USER_ID]);\n  const [message, setMessage] = useState(\"\");\n  const [selectedRoom, setSelectedRoom] = useState(null);\n  const [roomMessages, setRoomMessages] = useState([]);\n  const [senderName, setSenderName] = useState(\"\");\n  const [info, setInfo] = useState(\"\");\n  const [notification, setNotification] = useState(\"\");\n  const socketRef = useRef(null);\n\n  // Fetch friends, invitations, and rooms on load\n  useEffect(() => {\n    fetchFriends();\n    fetchRooms();\n    getSenderName();\n  }, []);\n\n  // Connect to Socket.IO\n  useEffect(() => {\n    const socket = io(SOCKET_SERVER_URL);\n    socketRef.current = socket;\n\n    // Listen for messages for any room\n    socket.on(\"room message\", ({\n      roomId,\n      message,\n      sender,\n      sentAt\n    }) => {\n      if (roomId === selectedRoom) {\n        setRoomMessages(prev => [...prev, {\n          message,\n          sender,\n          sentAt\n        }]);\n      } else {\n        setNotification(`New message in another room!`);\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Join a room and fetch chat history when selectedRoom changes\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (selectedRoom) {\n        if (socketRef.current) {\n          socketRef.current.emit(\"join room\", selectedRoom);\n        }\n        try {\n          const res = await axios.get(`${API_BASE}/friends/room/messages/${selectedRoom}`);\n          setRoomMessages(res.data.messages.map(msg => ({\n            message: msg.message,\n            sender: msg.sender,\n            sentAt: msg.sentAt\n          })));\n          setInfo(`Joined room: ${getRoomName(selectedRoom)}`);\n        } catch {\n          setRoomMessages([]);\n          setInfo(\"Error fetching chat history\");\n        }\n      }\n    };\n    fetchHistory();\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Notification for new friend invitations\n  useEffect(() => {\n    if (pendingInvitations.length > 0) {\n      setNotification(\"You have a new friend request!\");\n    }\n  }, [pendingInvitations.length]);\n  const getSenderName = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      if (res.data && res.data.friends) {\n        const user = res.data.friends.find(f => f._id === USER_ID);\n        setSenderName(user ? `${user.firstName} ${user.lastName}` : \"You\");\n      }\n    } catch {\n      setSenderName(\"You\");\n    }\n  };\n  const getRoomName = roomId => {\n    const room = privateRooms.find(r => r._id === roomId);\n    return room ? room.name : \"\";\n  };\n  const fetchFriends = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      setFriends(res.data.friends);\n      setPendingInvitations(res.data.pendingInvitations);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching friends\");\n    }\n  };\n  const fetchRooms = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/rooms/${USER_ID}`);\n      setPrivateRooms(res.data.privateRooms);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching rooms\");\n    }\n  };\n  const sendInvitation = async () => {\n    if (!inviteId) return;\n    try {\n      await axios.post(`${API_BASE}/friends/invite`, {\n        fromUserId: USER_ID,\n        toUserId: inviteId\n      });\n      setInfo(\"Invitation sent!\");\n      setInviteId(\"\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error sending invitation\");\n    }\n  };\n  const acceptInvitation = async fromUserId => {\n    try {\n      await axios.post(`${API_BASE}/friends/accept`, {\n        userId: USER_ID,\n        fromUserId\n      });\n      setInfo(\"Invitation accepted!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error accepting invitation\");\n    }\n  };\n  const removeFriend = async friendId => {\n    try {\n      await axios.post(`${API_BASE}/friends/remove`, {\n        userId: USER_ID,\n        friendId\n      });\n      setInfo(\"Friend removed!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error removing friend\");\n    }\n  };\n  const createRoom = async () => {\n    if (!roomName || roomMembers.length < 2) {\n      setInfo(\"Room name and at least 2 members required\");\n      return;\n    }\n    try {\n      await axios.post(`${API_BASE}/friends/room`, {\n        name: roomName,\n        memberIds: roomMembers\n      });\n      setInfo(\"Room created!\");\n      setRoomName(\"\");\n      fetchRooms();\n    } catch (err) {\n      setInfo(\"Error creating room\");\n    }\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (message.trim() && socketRef.current && selectedRoom) {\n      const sentAt = new Date().toISOString();\n      socketRef.current.emit(\"room message\", {\n        roomId: selectedRoom,\n        message,\n        sender: senderName || \"You\",\n        sentAt\n      });\n      try {\n        await axios.post(`${API_BASE}/friends/room/message`, {\n          roomId: selectedRoom,\n          message,\n          sender: senderName || \"You\",\n          sentAt\n        });\n      } catch {}\n      setRoomMessages(prev => [...prev, {\n        message,\n        sender: senderName || \"You\",\n        sentAt\n      }]);\n      setMessage(\"\");\n    }\n  };\n  const clearNotification = () => setNotification(\"\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 700,\n      margin: \"40px auto\",\n      fontFamily: \"Arial, sans-serif\"\n    },\n    children: [notification && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"#fffae6\",\n        color: \"#856404\",\n        padding: \"10px 20px\",\n        borderRadius: 8,\n        marginBottom: 20,\n        border: \"1px solid #ffeeba\",\n        fontWeight: \"bold\",\n        cursor: \"pointer\"\n      },\n      onClick: clearNotification,\n      children: [notification, \" (click to dismiss)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Friends & Private Rooms\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), info && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"green\",\n        marginBottom: 10\n      },\n      children: info\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Friends\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: friends.map(f => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: \"inline-block\",\n              width: 28,\n              height: 28,\n              borderRadius: \"50%\",\n              background: \"#007bff\",\n              color: \"#fff\",\n              textAlign: \"center\",\n              lineHeight: \"28px\",\n              marginRight: 8,\n              fontWeight: \"bold\"\n            },\n            children: getInitials(`${f.firstName} ${f.lastName}`)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this), f.firstName, \" \", f.lastName, \" (\", f.email, \")\", /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginLeft: 10,\n              color: \"white\",\n              background: \"red\",\n              border: \"none\",\n              borderRadius: 4,\n              padding: \"2px 8px\",\n              cursor: \"pointer\"\n            },\n            onClick: () => removeFriend(f._id),\n            children: \"Remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this)]\n        }, f._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Pending Invitations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: pendingInvitations.map(inv => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: \"inline-block\",\n              width: 28,\n              height: 28,\n              borderRadius: \"50%\",\n              background: \"#6c757d\",\n              color: \"#fff\",\n              textAlign: \"center\",\n              lineHeight: \"28px\",\n              marginRight: 8,\n              fontWeight: \"bold\"\n            },\n            children: getInitials(`${inv.firstName} ${inv.lastName}`)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this), inv.firstName, \" \", inv.lastName, \" (\", inv.email, \")\", \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => acceptInvitation(inv._id),\n            children: \"Accept\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 15\n          }, this)]\n        }, inv._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Send Friend Invitation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter user ID to invite\",\n        value: inviteId,\n        onChange: e => setInviteId(e.target.value),\n        style: {\n          marginRight: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendInvitation,\n        children: \"Send Invitation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Private Rooms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: privateRooms.map(room => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: room.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this), \" (Members:\", \" \", room.members.map(m => `${m.firstName} ${m.lastName}`).join(\", \"), \")\", /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginLeft: 10\n            },\n            onClick: () => setSelectedRoom(room._id),\n            children: \"Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this)]\n        }, room._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Create Private Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Room name\",\n        value: roomName,\n        onChange: e => setRoomName(e.target.value),\n        style: {\n          marginRight: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: createRoom,\n        children: \"Create Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          color: \"#888\",\n          marginTop: 4\n        },\n        children: \"(Room will include you and the other test user)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this), selectedRoom && /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginTop: 40\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Chat in: \", getRoomName(selectedRoom)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: \"1px solid #ccc\",\n          borderRadius: 8,\n          padding: 16,\n          minHeight: 200,\n          marginBottom: 16,\n          background: \"#f9f9f9\",\n          overflowY: \"auto\",\n          height: 300\n        },\n        children: roomMessages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"8px 0\",\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: \"inline-block\",\n              width: 28,\n              height: 28,\n              borderRadius: \"50%\",\n              background: \"#17a2b8\",\n              color: \"#fff\",\n              textAlign: \"center\",\n              lineHeight: \"28px\",\n              marginRight: 8,\n              fontWeight: \"bold\"\n            },\n            children: getInitials(msg.sender)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [msg.sender, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: 6\n            },\n            children: msg.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: \"auto\",\n              fontSize: 12,\n              color: \"#888\"\n            },\n            children: msg.sentAt ? formatTime(msg.sentAt) : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 17\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSendMessage,\n        style: {\n          display: \"flex\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          placeholder: \"Type your message...\",\n          style: {\n            flex: 1,\n            padding: 8,\n            borderRadius: 4,\n            border: \"1px solid #ccc\",\n            marginRight: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          style: {\n            padding: \"8px 16px\",\n            borderRadius: 4,\n            border: \"none\",\n            background: \"#007bff\",\n            color: \"#fff\",\n            cursor: \"pointer\"\n          },\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"SB0ryUXKoXlx04Lv6sodtbeFi1A=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","io","jsxDEV","_jsxDEV","USER_ID","OTHER_USER_ID","API_BASE","SOCKET_SERVER_URL","getInitials","name","parts","split","map","p","join","toUpperCase","formatTime","dateString","d","Date","toLocaleTimeString","hour","minute","App","_s","friends","setFriends","pendingInvitations","setPendingInvitations","privateRooms","setPrivateRooms","inviteId","setInviteId","roomName","setRoomName","roomMembers","message","setMessage","selectedRoom","setSelectedRoom","roomMessages","setRoomMessages","senderName","setSenderName","info","setInfo","notification","setNotification","socketRef","fetchFriends","fetchRooms","getSenderName","socket","current","on","roomId","sender","sentAt","prev","disconnect","fetchHistory","emit","res","get","data","messages","msg","getRoomName","length","user","find","f","_id","firstName","lastName","room","r","err","sendInvitation","post","fromUserId","toUserId","acceptInvitation","userId","removeFriend","friendId","createRoom","memberIds","handleSendMessage","e","preventDefault","trim","toISOString","clearNotification","style","maxWidth","margin","fontFamily","children","background","color","padding","borderRadius","marginBottom","border","fontWeight","cursor","onClick","fileName","_jsxFileName","lineNumber","columnNumber","display","width","height","textAlign","lineHeight","marginRight","email","marginLeft","inv","type","placeholder","value","onChange","target","members","m","fontSize","marginTop","minHeight","overflowY","idx","alignItems","onSubmit","flex","_c","$RefreshReg$"],"sources":["/Users/silviutimaru/futuristic-chat-app/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { io } from \"socket.io-client\";\n\n// Change these to your test user IDs\nconst USER_ID = \"6866a789ed224bc42820cbc9\";\nconst OTHER_USER_ID = \"6866a8a0cca934b2567caac1\";\n\nconst API_BASE = \"http://localhost:3000\";\nconst SOCKET_SERVER_URL = \"http://localhost:3000\";\n\nfunction getInitials(name) {\n  if (!name) return \"?\";\n  const parts = name.split(\" \");\n  return parts.map((p) => p[0]).join(\"\").toUpperCase();\n}\n\nfunction formatTime(dateString) {\n  const d = new Date(dateString);\n  return d.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\n}\n\nfunction App() {\n  const [friends, setFriends] = useState([]);\n  const [pendingInvitations, setPendingInvitations] = useState([]);\n  const [privateRooms, setPrivateRooms] = useState([]);\n  const [inviteId, setInviteId] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [roomMembers] = useState([USER_ID, OTHER_USER_ID]);\n  const [message, setMessage] = useState(\"\");\n  const [selectedRoom, setSelectedRoom] = useState(null);\n  const [roomMessages, setRoomMessages] = useState([]);\n  const [senderName, setSenderName] = useState(\"\");\n  const [info, setInfo] = useState(\"\");\n  const [notification, setNotification] = useState(\"\");\n  const socketRef = useRef(null);\n\n  // Fetch friends, invitations, and rooms on load\n  useEffect(() => {\n    fetchFriends();\n    fetchRooms();\n    getSenderName();\n  }, []);\n\n  // Connect to Socket.IO\n  useEffect(() => {\n    const socket = io(SOCKET_SERVER_URL);\n    socketRef.current = socket;\n\n    // Listen for messages for any room\n    socket.on(\"room message\", ({ roomId, message, sender, sentAt }) => {\n      if (roomId === selectedRoom) {\n        setRoomMessages((prev) => [...prev, { message, sender, sentAt }]);\n      } else {\n        setNotification(`New message in another room!`);\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Join a room and fetch chat history when selectedRoom changes\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (selectedRoom) {\n        if (socketRef.current) {\n          socketRef.current.emit(\"join room\", selectedRoom);\n        }\n        try {\n          const res = await axios.get(`${API_BASE}/friends/room/messages/${selectedRoom}`);\n          setRoomMessages(\n            res.data.messages.map((msg) => ({\n              message: msg.message,\n              sender: msg.sender,\n              sentAt: msg.sentAt,\n            }))\n          );\n          setInfo(`Joined room: ${getRoomName(selectedRoom)}`);\n        } catch {\n          setRoomMessages([]);\n          setInfo(\"Error fetching chat history\");\n        }\n      }\n    };\n    fetchHistory();\n    // eslint-disable-next-line\n  }, [selectedRoom]);\n\n  // Notification for new friend invitations\n  useEffect(() => {\n    if (pendingInvitations.length > 0) {\n      setNotification(\"You have a new friend request!\");\n    }\n  }, [pendingInvitations.length]);\n\n  const getSenderName = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      if (res.data && res.data.friends) {\n        const user = res.data.friends.find((f) => f._id === USER_ID);\n        setSenderName(user ? `${user.firstName} ${user.lastName}` : \"You\");\n      }\n    } catch {\n      setSenderName(\"You\");\n    }\n  };\n\n  const getRoomName = (roomId) => {\n    const room = privateRooms.find((r) => r._id === roomId);\n    return room ? room.name : \"\";\n  };\n\n  const fetchFriends = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/list/${USER_ID}`);\n      setFriends(res.data.friends);\n      setPendingInvitations(res.data.pendingInvitations);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching friends\");\n    }\n  };\n\n  const fetchRooms = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/friends/rooms/${USER_ID}`);\n      setPrivateRooms(res.data.privateRooms);\n      setInfo(\"\");\n    } catch (err) {\n      setInfo(\"Error fetching rooms\");\n    }\n  };\n\n  const sendInvitation = async () => {\n    if (!inviteId) return;\n    try {\n      await axios.post(`${API_BASE}/friends/invite`, {\n        fromUserId: USER_ID,\n        toUserId: inviteId,\n      });\n      setInfo(\"Invitation sent!\");\n      setInviteId(\"\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error sending invitation\");\n    }\n  };\n\n  const acceptInvitation = async (fromUserId) => {\n    try {\n      await axios.post(`${API_BASE}/friends/accept`, {\n        userId: USER_ID,\n        fromUserId,\n      });\n      setInfo(\"Invitation accepted!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error accepting invitation\");\n    }\n  };\n\n  const removeFriend = async (friendId) => {\n    try {\n      await axios.post(`${API_BASE}/friends/remove`, {\n        userId: USER_ID,\n        friendId,\n      });\n      setInfo(\"Friend removed!\");\n      fetchFriends();\n    } catch (err) {\n      setInfo(\"Error removing friend\");\n    }\n  };\n\n  const createRoom = async () => {\n    if (!roomName || roomMembers.length < 2) {\n      setInfo(\"Room name and at least 2 members required\");\n      return;\n    }\n    try {\n      await axios.post(`${API_BASE}/friends/room`, {\n        name: roomName,\n        memberIds: roomMembers,\n      });\n      setInfo(\"Room created!\");\n      setRoomName(\"\");\n      fetchRooms();\n    } catch (err) {\n      setInfo(\"Error creating room\");\n    }\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (message.trim() && socketRef.current && selectedRoom) {\n      const sentAt = new Date().toISOString();\n      socketRef.current.emit(\"room message\", {\n        roomId: selectedRoom,\n        message,\n        sender: senderName || \"You\",\n        sentAt,\n      });\n      try {\n        await axios.post(`${API_BASE}/friends/room/message`, {\n          roomId: selectedRoom,\n          message,\n          sender: senderName || \"You\",\n          sentAt,\n        });\n      } catch {}\n      setRoomMessages((prev) => [\n        ...prev,\n        { message, sender: senderName || \"You\", sentAt },\n      ]);\n      setMessage(\"\");\n    }\n  };\n\n  const clearNotification = () => setNotification(\"\");\n\n  return (\n    <div style={{ maxWidth: 700, margin: \"40px auto\", fontFamily: \"Arial, sans-serif\" }}>\n      {/* Notification Bar */}\n      {notification && (\n        <div\n          style={{\n            background: \"#fffae6\",\n            color: \"#856404\",\n            padding: \"10px 20px\",\n            borderRadius: 8,\n            marginBottom: 20,\n            border: \"1px solid #ffeeba\",\n            fontWeight: \"bold\",\n            cursor: \"pointer\",\n          }}\n          onClick={clearNotification}\n        >\n          {notification} (click to dismiss)\n        </div>\n      )}\n\n      <h2>Friends & Private Rooms</h2>\n      {info && <div style={{ color: \"green\", marginBottom: 10 }}>{info}</div>}\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Your Friends</h3>\n        <ul>\n          {friends.map((f) => (\n            <li key={f._id}>\n              <span\n                style={{\n                  display: \"inline-block\",\n                  width: 28,\n                  height: 28,\n                  borderRadius: \"50%\",\n                  background: \"#007bff\",\n                  color: \"#fff\",\n                  textAlign: \"center\",\n                  lineHeight: \"28px\",\n                  marginRight: 8,\n                  fontWeight: \"bold\",\n                }}\n              >\n                {getInitials(`${f.firstName} ${f.lastName}`)}\n              </span>\n              {f.firstName} {f.lastName} ({f.email})\n              <button\n                style={{\n                  marginLeft: 10,\n                  color: \"white\",\n                  background: \"red\",\n                  border: \"none\",\n                  borderRadius: 4,\n                  padding: \"2px 8px\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => removeFriend(f._id)}\n              >\n                Remove\n              </button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Pending Invitations</h3>\n        <ul>\n          {pendingInvitations.map((inv) => (\n            <li key={inv._id}>\n              <span\n                style={{\n                  display: \"inline-block\",\n                  width: 28,\n                  height: 28,\n                  borderRadius: \"50%\",\n                  background: \"#6c757d\",\n                  color: \"#fff\",\n                  textAlign: \"center\",\n                  lineHeight: \"28px\",\n                  marginRight: 8,\n                  fontWeight: \"bold\",\n                }}\n              >\n                {getInitials(`${inv.firstName} ${inv.lastName}`)}\n              </span>\n              {inv.firstName} {inv.lastName} ({inv.email}){\" \"}\n              <button onClick={() => acceptInvitation(inv._id)}>Accept</button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Send Friend Invitation</h3>\n        <input\n          type=\"text\"\n          placeholder=\"Enter user ID to invite\"\n          value={inviteId}\n          onChange={(e) => setInviteId(e.target.value)}\n          style={{ marginRight: 8 }}\n        />\n        <button onClick={sendInvitation}>Send Invitation</button>\n      </section>\n\n      <section style={{ marginBottom: 30 }}>\n        <h3>Your Private Rooms</h3>\n        <ul>\n          {privateRooms.map((room) => (\n            <li key={room._id}>\n              <b>{room.name}</b> (Members:{\" \"}\n              {room.members.map((m) => `${m.firstName} ${m.lastName}`).join(\", \")})\n              <button\n                style={{ marginLeft: 10 }}\n                onClick={() => setSelectedRoom(room._id)}\n              >\n                Chat\n              </button>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section>\n        <h3>Create Private Room</h3>\n        <input\n          type=\"text\"\n          placeholder=\"Room name\"\n          value={roomName}\n          onChange={(e) => setRoomName(e.target.value)}\n          style={{ marginRight: 8 }}\n        />\n        <button onClick={createRoom}>Create Room</button>\n        <div style={{ fontSize: 12, color: \"#888\", marginTop: 4 }}>\n          (Room will include you and the other test user)\n        </div>\n      </section>\n\n      {selectedRoom && (\n        <section style={{ marginTop: 40 }}>\n          <h3>Chat in: {getRoomName(selectedRoom)}</h3>\n          <div\n            style={{\n              border: \"1px solid #ccc\",\n              borderRadius: 8,\n              padding: 16,\n              minHeight: 200,\n              marginBottom: 16,\n              background: \"#f9f9f9\",\n              overflowY: \"auto\",\n              height: 300,\n            }}\n          >\n            {roomMessages.map((msg, idx) => (\n              <div key={idx} style={{ margin: \"8px 0\", display: \"flex\", alignItems: \"center\" }}>\n                <span\n                  style={{\n                    display: \"inline-block\",\n                    width: 28,\n                    height: 28,\n                    borderRadius: \"50%\",\n                    background: \"#17a2b8\",\n                    color: \"#fff\",\n                    textAlign: \"center\",\n                    lineHeight: \"28px\",\n                    marginRight: 8,\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {getInitials(msg.sender)}\n                </span>\n                <b>{msg.sender}:</b>\n                <span style={{ marginLeft: 6 }}>{msg.message}</span>\n                <span style={{ marginLeft: \"auto\", fontSize: 12, color: \"#888\" }}>\n                  {msg.sentAt ? formatTime(msg.sentAt) : \"\"}\n                </span>\n              </div>\n            ))}\n          </div>\n          <form onSubmit={handleSendMessage} style={{ display: \"flex\" }}>\n            <input\n              type=\"text\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder=\"Type your message...\"\n              style={{\n                flex: 1,\n                padding: 8,\n                borderRadius: 4,\n                border: \"1px solid #ccc\",\n                marginRight: 8,\n              }}\n            />\n            <button\n              type=\"submit\"\n              style={{\n                padding: \"8px 16px\",\n                borderRadius: 4,\n                border: \"none\",\n                background: \"#007bff\",\n                color: \"#fff\",\n                cursor: \"pointer\",\n              }}\n            >\n              Send\n            </button>\n          </form>\n        </section>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}